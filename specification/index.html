
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A composable schema for expressing any trading strategy">
      
      
      
        <link rel="canonical" href="https://obichan117.github.io/universal-trading-strategy-schema/specification/">
      
      
        <link rel="prev" href="../mcp-guide/">
      
      
        <link rel="next" href="../comparison/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Specification - Universal Trading Strategy Schema</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utss-v10-schema-specification" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Universal Trading Strategy Schema" class="md-header__button md-logo" aria-label="Universal Trading Strategy Schema" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Universal Trading Strategy Schema
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Specification
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/obichan117/universal-trading-strategy-schema" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    obichan117/universal-trading-strategy-schema
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Universal Trading Strategy Schema" class="md-nav__button md-logo" aria-label="Universal Trading Strategy Schema" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Universal Trading Strategy Schema
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/obichan117/universal-trading-strategy-schema" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    obichan117/universal-trading-strategy-schema
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quickstart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../formula-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Formula Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Packages
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Packages
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    utss (Schema)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api-pyutss/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    pyutss (Backtesting)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    utss-llm (LLM)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mcp-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    utss-mcp (MCP)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Specification
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Specification
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schema Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-system-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type System Overview
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Design Principles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Design Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-declarative-over-imperative" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Declarative Over Imperative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-consistent-type-discriminators" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Consistent Type Discriminators
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-composition-via-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Composition via References
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-progressive-disclosure" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Progressive Disclosure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-execution-agnostic" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Execution-Agnostic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Evaluation Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schema Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Schema Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#top-level-document" class="md-nav__link">
    <span class="md-ellipsis">
      
        Top-Level Document
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#info-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        Info (Required)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#universe-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        Universe (Required)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signals-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signals (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditions-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditions (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rules-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rules (Required)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constraints-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Constraints (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedule-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schedule (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters (Optional)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type Definitions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Type Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signal
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pricesignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        PriceSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indicatorsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        IndicatorSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fundamentalsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        FundamentalSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calendarsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        CalendarSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#portfoliosignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        PortfolioSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relativesignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        RelativeSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constantsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConstantSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmeticsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ArithmeticSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expressionsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ExpressionSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#externalsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ExternalSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameterreference" class="md-nav__link">
    <span class="md-ellipsis">
      
        ParameterReference
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Condition
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Condition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparisoncondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        ComparisonCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#andcondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        AndCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orcondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notcondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        NotCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expressioncondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        ExpressionCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alwayscondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        AlwaysCondition
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action" class="md-nav__link">
    <span class="md-ellipsis">
      
        Action
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tradeaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        TradeAction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rebalanceaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        RebalanceAction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alertaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        AlertAction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#holdaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        HoldAction
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sizing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sizing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixedamountsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        FixedAmountSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#percentequitysizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        PercentEquitySizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#percentpositionsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        PercentPositionSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#riskbasedsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        RiskBasedSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kellysizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        KellySizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volatilityadjustedsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        VolatilityAdjustedSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditionalsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConditionalSizing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enumerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enumerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enumerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#closed-enums-fixed-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Closed Enums (Fixed Values)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Closed Enums (Fixed Values)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timeframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        Timeframe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dayofweek" class="md-nav__link">
    <span class="md-ellipsis">
      
        DayOfWeek
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pricefield" class="md-nav__link">
    <span class="md-ellipsis">
      
        PriceField
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordertype" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrderType
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeinforce" class="md-nav__link">
    <span class="md-ellipsis">
      
        TimeInForce
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparisonop" class="md-nav__link">
    <span class="md-ellipsis">
      
        ComparisonOp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmeticop" class="md-nav__link">
    <span class="md-ellipsis">
      
        ArithmeticOp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensible-enums-open-for-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensible Enums (Open for Extensions)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extensible Enums (Open for Extensions)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#indicatortype" class="md-nav__link">
    <span class="md-ellipsis">
      
        IndicatorType
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fundamentalmetric" class="md-nav__link">
    <span class="md-ellipsis">
      
        FundamentalMetric
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventtype" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventType
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stockindex" class="md-nav__link">
    <span class="md-ellipsis">
      
        StockIndex
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extensibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensibility
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extensibility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extensibility-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensibility Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-1-core-enums-portable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 1: Core Enums (Portable)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-2-namespaced-extensions-semi-portable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 2: Namespaced Extensions (Semi-Portable)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-3-expression-language" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 3: Expression Language
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-4-external-signals" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 4: External Signals
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-5-x-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 5: x-extensions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-core-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding New Core Values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#portability-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Portability Matrix
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimal Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsi-mean-reversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        RSI Mean Reversion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nikkei-momentum-with-hedge" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nikkei Momentum with Hedge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risk-parity-portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      
        Risk Parity Portfolio
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version History
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        References
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Comparison
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../research/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Research
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Changelog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contributing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      
        Table of Contents
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#schema-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schema Architecture
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-system-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type System Overview
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-principles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Design Principles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Design Principles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-declarative-over-imperative" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Declarative Over Imperative
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-consistent-type-discriminators" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Consistent Type Discriminators
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-composition-via-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Composition via References
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-progressive-disclosure" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Progressive Disclosure
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-execution-agnostic" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Execution-Agnostic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Evaluation Flow
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      
        Data Flow
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#schema-structure" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schema Structure
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Schema Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#top-level-document" class="md-nav__link">
    <span class="md-ellipsis">
      
        Top-Level Document
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#info-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        Info (Required)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#universe-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        Universe (Required)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signals-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signals (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditions-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Conditions (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rules-required" class="md-nav__link">
    <span class="md-ellipsis">
      
        Rules (Required)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constraints-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Constraints (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedule-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Schedule (Optional)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters-optional" class="md-nav__link">
    <span class="md-ellipsis">
      
        Parameters (Optional)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#type-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Type Definitions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Type Definitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signal" class="md-nav__link">
    <span class="md-ellipsis">
      
        Signal
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Signal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pricesignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        PriceSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indicatorsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        IndicatorSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fundamentalsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        FundamentalSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calendarsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        CalendarSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#portfoliosignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        PortfolioSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relativesignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        RelativeSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constantsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConstantSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmeticsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ArithmeticSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expressionsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ExpressionSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#externalsignal" class="md-nav__link">
    <span class="md-ellipsis">
      
        ExternalSignal
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameterreference" class="md-nav__link">
    <span class="md-ellipsis">
      
        ParameterReference
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#condition" class="md-nav__link">
    <span class="md-ellipsis">
      
        Condition
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Condition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#comparisoncondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        ComparisonCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#andcondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        AndCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#orcondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notcondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        NotCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#expressioncondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        ExpressionCondition
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alwayscondition" class="md-nav__link">
    <span class="md-ellipsis">
      
        AlwaysCondition
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#action" class="md-nav__link">
    <span class="md-ellipsis">
      
        Action
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tradeaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        TradeAction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rebalanceaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        RebalanceAction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alertaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        AlertAction
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#holdaction" class="md-nav__link">
    <span class="md-ellipsis">
      
        HoldAction
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sizing
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sizing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixedamountsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        FixedAmountSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#percentequitysizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        PercentEquitySizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#percentpositionsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        PercentPositionSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#riskbasedsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        RiskBasedSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kellysizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        KellySizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volatilityadjustedsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        VolatilityAdjustedSizing
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditionalsizing" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConditionalSizing
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enumerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enumerations
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enumerations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#closed-enums-fixed-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Closed Enums (Fixed Values)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Closed Enums (Fixed Values)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timeframe" class="md-nav__link">
    <span class="md-ellipsis">
      
        Timeframe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dayofweek" class="md-nav__link">
    <span class="md-ellipsis">
      
        DayOfWeek
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pricefield" class="md-nav__link">
    <span class="md-ellipsis">
      
        PriceField
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ordertype" class="md-nav__link">
    <span class="md-ellipsis">
      
        OrderType
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeinforce" class="md-nav__link">
    <span class="md-ellipsis">
      
        TimeInForce
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#comparisonop" class="md-nav__link">
    <span class="md-ellipsis">
      
        ComparisonOp
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#arithmeticop" class="md-nav__link">
    <span class="md-ellipsis">
      
        ArithmeticOp
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extensible-enums-open-for-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensible Enums (Open for Extensions)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extensible Enums (Open for Extensions)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#indicatortype" class="md-nav__link">
    <span class="md-ellipsis">
      
        IndicatorType
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fundamentalmetric" class="md-nav__link">
    <span class="md-ellipsis">
      
        FundamentalMetric
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventtype" class="md-nav__link">
    <span class="md-ellipsis">
      
        EventType
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stockindex" class="md-nav__link">
    <span class="md-ellipsis">
      
        StockIndex
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extensibility" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensibility
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Extensibility">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extensibility-philosophy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Extensibility Philosophy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-1-core-enums-portable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 1: Core Enums (Portable)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-2-namespaced-extensions-semi-portable" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 2: Namespaced Extensions (Semi-Portable)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-3-expression-language" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 3: Expression Language
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-4-external-signals" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 4: External Signals
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layer-5-x-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Layer 5: x-extensions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-new-core-values" class="md-nav__link">
    <span class="md-ellipsis">
      
        Adding New Core Values
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#portability-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      
        Portability Matrix
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Examples
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#minimal-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimal Strategy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsi-mean-reversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        RSI Mean Reversion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nikkei-momentum-with-hedge" class="md-nav__link">
    <span class="md-ellipsis">
      
        Nikkei Momentum with Hedge
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risk-parity-portfolio" class="md-nav__link">
    <span class="md-ellipsis">
      
        Risk Parity Portfolio
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-history" class="md-nav__link">
    <span class="md-ellipsis">
      
        Version History
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      
        References
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="utss-v10-schema-specification">UTSS v1.0 Schema Specification<a class="headerlink" href="#utss-v10-schema-specification" title="Permanent link">&para;</a></h1>
<p><strong>Universal Trading Strategy Schema - Complete Reference</strong></p>
<blockquote>
<p>This document defines the schema. Execution semantics are left to consuming applications.</p>
</blockquote>
<hr />
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#overview">Overview</a></li>
<li><a href="#design-principles">Design Principles</a></li>
<li><a href="#schema-structure">Schema Structure</a></li>
<li><a href="#type-definitions">Type Definitions</a></li>
<li><a href="#enumerations">Enumerations</a></li>
<li><a href="#extensibility">Extensibility</a></li>
<li><a href="#examples">Examples</a></li>
</ol>
<hr />
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>UTSS is a declarative schema for expressing trading strategies. A valid UTSS document contains all information needed to:</p>
<ul>
<li>Select which assets to trade (universe)</li>
<li>Compute derived values (signals)</li>
<li>Define trading logic (rules)</li>
<li>Specify risk limits (constraints)</li>
<li>Set evaluation schedule (schedule)</li>
</ul>
<h3 id="schema-architecture">Schema Architecture<a class="headerlink" href="#schema-architecture" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph Strategy[" Strategy Document"]
        Info["info"]
        Universe["universe"]
        Parameters["parameters"]
        Signals["signals"]
        Conditions["conditions"]
        Rules["rules"]
        Constraints["constraints"]
        Schedule["schedule"]
    end

    subgraph Rule[" Rule"]
        When["when: Condition"]
        Then["then: Action"]
    end

    subgraph SignalTypes[" Signal Types"]
        Price["PriceSignal"]
        Indicator["IndicatorSignal"]
        Fundamental["FundamentalSignal"]
        Calendar["CalendarSignal"]
        Event["EventSignal"]
        Portfolio["PortfolioSignal"]
        Relative["RelativeSignal"]
        Constant["ConstantSignal"]
        Arithmetic["ArithmeticSignal"]
        Expression["ExpressionSignal"]
        External["ExternalSignal"]
    end

    subgraph ConditionTypes[" Condition Types (v1.0 Minimal)"]
        Comparison["ComparisonCondition"]
        Logical["And/Or/Not"]
        Expression["ExpressionCondition"]
        Always["AlwaysCondition"]
    end

    subgraph ActionTypes[" Action Types"]
        Trade["TradeAction"]
        Rebalance["RebalanceAction"]
        Alert["AlertAction"]
        Hold["HoldAction"]
    end

    subgraph SizingTypes[" Sizing Types"]
        Fixed["FixedAmount"]
        PctEquity["PercentEquity"]
        PctPosition["PercentPosition"]
        RiskBased["RiskBased"]
        Kelly["Kelly"]
        VolAdj["VolatilityAdjusted"]
    end

    Rules --&gt; Rule
    When --&gt; ConditionTypes
    Then --&gt; ActionTypes
    Signals --&gt; SignalTypes
    Conditions --&gt; ConditionTypes
    Trade --&gt; SizingTypes
    Comparison --&gt; SignalTypes
    Expression --&gt; SignalTypes

    Parameters -.-&gt;|"$param"| SignalTypes
    Signals -.-&gt;|"$ref"| ConditionTypes

    style Strategy fill:#e1f5fe
    style Rule fill:#fff3e0
    style SignalTypes fill:#e8f5e9
    style ConditionTypes fill:#fce4ec
    style ActionTypes fill:#f3e5f5
    style SizingTypes fill:#fff8e1</code></pre>
<h3 id="type-system-overview">Type System Overview<a class="headerlink" href="#type-system-overview" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph LR
    subgraph Primitives["Primitives"]
        Number["number"]
        String["string"]
        Boolean["boolean"]
        Integer["integer"]
    end

    subgraph ValueTypes["Value Producers"]
        Signal["Signal  number"]
        Condition["Condition  boolean"]
    end

    subgraph References["References"]
        Ref["$ref  any component"]
        Param["$param  parameter value"]
    end

    subgraph Composites["Composites"]
        Rule["Rule = Condition + Action"]
        Action["Action = what to do"]
        Sizing["Sizing = how much"]
    end

    Signal --&gt; Number
    Condition --&gt; Boolean
    Rule --&gt; Condition
    Rule --&gt; Action
    Action --&gt; Sizing

    style Primitives fill:#f5f5f5
    style ValueTypes fill:#e3f2fd
    style References fill:#fff3e0
    style Composites fill:#e8f5e9</code></pre>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>                      UTSS Document                          
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>  info         Metadata (id, name, version, author)        
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>  universe     What to trade                                
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  signals      Named signal definitions (optional)         
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>  conditions   Named condition definitions (optional)      
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>  rules        When/then pairs (required)                  
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>  constraints  Risk limits (optional)                      
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>  schedule     Evaluation timing (optional)                
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>  parameters   Optimizable values (optional)               
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span></code></pre></div>
<hr />
<h2 id="design-principles">Design Principles<a class="headerlink" href="#design-principles" title="Permanent link">&para;</a></h2>
<h3 id="1-declarative-over-imperative">1. Declarative Over Imperative<a class="headerlink" href="#1-declarative-over-imperative" title="Permanent link">&para;</a></h3>
<p>Define WHAT should happen, not HOW to compute it.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># GOOD: Declarative</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI(14) &lt; 30</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="nt">then</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buy 10%</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="c1"># BAD: Imperative (not supported)</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nt">for each bar</span><span class="p">:</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">rsi = calculate_rsi(close, 14)</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">if rsi &lt; 30</span><span class="p p-Indicator">:</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">buy(0.10 * equity)</span>
</span></code></pre></div>
<h3 id="2-consistent-type-discriminators">2. Consistent Type Discriminators<a class="headerlink" href="#2-consistent-type-discriminators" title="Permanent link">&para;</a></h3>
<p>Every complex type has a <code>type</code> field for unambiguous parsing.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">signal</span><span class="p">:</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span><span class="w">    </span><span class="c1"># Always present</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> period</span><span class="p">:</span><span class="w"> </span><span class="nv">14</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span></code></pre></div>
<h3 id="3-composition-via-references">3. Composition via References<a class="headerlink" href="#3-composition-via-references" title="Permanent link">&para;</a></h3>
<p>Reuse components with <code>$ref</code> instead of duplication.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">rsi_14</span><span class="p">:</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> period</span><span class="p">:</span><span class="w"> </span><span class="nv">14</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">when</span><span class="p">:</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">      </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/signals/rsi_14&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w">  </span><span class="c1"># Reference</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">      </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;&quot;</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">      </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="nv">30</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span></code></pre></div>
<h3 id="4-progressive-disclosure">4. Progressive Disclosure<a class="headerlink" href="#4-progressive-disclosure" title="Permanent link">&para;</a></h3>
<p>Simple strategies are concise; complexity is opt-in.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Minimal valid strategy</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nt">info</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> id</span><span class="p">:</span><span class="w"> </span><span class="nv">simple</span><span class="p p-Indicator">,</span><span class="nt"> version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nt">universe</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">static</span><span class="p p-Indicator">,</span><span class="nt"> symbols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">AAPL</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Buy</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">trade</span><span class="p p-Indicator">,</span><span class="nt"> direction</span><span class="p">:</span><span class="w"> </span><span class="nv">buy</span><span class="p p-Indicator">,</span><span class="nt"> sizing</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">percent_of_equity</span><span class="p p-Indicator">,</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span></code></pre></div>
<h3 id="5-execution-agnostic">5. Execution-Agnostic<a class="headerlink" href="#5-execution-agnostic" title="Permanent link">&para;</a></h3>
<p>Schema defines strategy logic. Execution details (slippage, fees, broker) are out of scope.</p>
<h3 id="evaluation-flow">Evaluation Flow<a class="headerlink" href="#evaluation-flow" title="Permanent link">&para;</a></h3>
<p>The conceptual evaluation flow (implemented by consuming applications):</p>
<pre class="mermaid"><code>sequenceDiagram
    participant S as Schedule
    participant U as Universe
    participant Sig as Signals
    participant C as Conditions
    participant R as Rules
    participant A as Actions
    participant E as Execution Engine

    S-&gt;&gt;U: Trigger evaluation
    U-&gt;&gt;U: Resolve symbols
    loop For each symbol
        U-&gt;&gt;Sig: Compute signals
        Sig-&gt;&gt;C: Evaluate conditions
        C-&gt;&gt;R: Check rule triggers
        R-&gt;&gt;R: Sort by priority
        loop For each triggered rule
            R-&gt;&gt;A: Get action
            A-&gt;&gt;E: Submit order/alert
        end
    end
    E-&gt;&gt;E: Apply constraints
    E-&gt;&gt;E: Execute actions</code></pre>
<h3 id="data-flow">Data Flow<a class="headerlink" href="#data-flow" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>flowchart LR
    subgraph Input[" Market Data"]
        OHLCV["OHLCV"]
        Fund["Fundamentals"]
        Events["Events"]
    end

    subgraph Signals[" Signals"]
        Price["Price"]
        Ind["Indicators"]
        Port["Portfolio"]
        Calc["Calculated"]
    end

    subgraph Logic[" Logic"]
        Cond["Conditions"]
        Rules["Rules"]
    end

    subgraph Output[" Output"]
        Orders["Orders"]
        Alerts["Alerts"]
        Positions["Positions"]
    end

    OHLCV --&gt; Price
    OHLCV --&gt; Ind
    Fund --&gt; Calc
    Events --&gt; Calc
    Price --&gt; Cond
    Ind --&gt; Cond
    Port --&gt; Cond
    Calc --&gt; Cond
    Cond --&gt; Rules
    Rules --&gt; Orders
    Rules --&gt; Alerts
    Orders --&gt; Positions
    Positions --&gt; Port

    style Input fill:#e3f2fd
    style Signals fill:#e8f5e9
    style Logic fill:#fff3e0
    style Output fill:#f3e5f5</code></pre>
<hr />
<h2 id="schema-structure">Schema Structure<a class="headerlink" href="#schema-structure" title="Permanent link">&para;</a></h2>
<h3 id="top-level-document">Top-Level Document<a class="headerlink" href="#top-level-document" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">$schema</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://obichan117.github.io/universal-trading-strategy-schema/schema/v1/strategy.json</span><span class="w">  </span><span class="c1"># Optional</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nt">info</span><span class="p">:</span><span class="w">          </span><span class="c1"># Required - Strategy metadata</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nt">universe</span><span class="p">:</span><span class="w">      </span><span class="c1"># Required - Asset selection</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nt">signals</span><span class="p">:</span><span class="w">       </span><span class="c1"># Optional - Named signal definitions</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nt">conditions</span><span class="p">:</span><span class="w">    </span><span class="c1"># Optional - Named condition definitions</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="nt">rules</span><span class="p">:</span><span class="w">         </span><span class="c1"># Required - Trading rules (min 1)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="nt">constraints</span><span class="p">:</span><span class="w">   </span><span class="c1"># Optional - Risk management</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="nt">schedule</span><span class="p">:</span><span class="w">      </span><span class="c1"># Optional - Evaluation timing</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="nt">parameters</span><span class="p">:</span><span class="w">    </span><span class="c1"># Optional - Optimizable parameters</span>
</span></code></pre></div>
<h3 id="info-required">Info (Required)<a class="headerlink" href="#info-required" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">info</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Required. Pattern: ^[a-z0-9_-]+$</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">            </span><span class="c1"># Required. Max 100 chars</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">         </span><span class="c1"># Required. Pattern: ^\d+\.\d+(\.\d+)?$</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">  </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">     </span><span class="c1"># Optional. Max 2000 chars</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">  </span><span class="nt">author</span><span class="p">:</span><span class="w">                 </span><span class="c1"># Optional</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">  </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">string</span><span class="p p-Indicator">]</span><span class="w">          </span><span class="c1"># Optional. Max 10 items</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">  </span><span class="nt">created_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">datetime</span><span class="w">    </span><span class="c1"># Optional. ISO 8601</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">  </span><span class="nt">updated_at</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">datetime</span><span class="w">    </span><span class="c1"># Optional. ISO 8601</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">  </span><span class="nt">visibility</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">enum</span><span class="w">        </span><span class="c1"># Optional. public | private | unlisted</span>
</span></code></pre></div>
<h3 id="universe-required">Universe (Required)<a class="headerlink" href="#universe-required" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Option A: Static list</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="nt">symbols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">string</span><span class="p p-Indicator">]</span><span class="w">       </span><span class="c1"># Required. Min 1 item</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="c1"># Option B: Index-based</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">index</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">  </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StockIndex</span><span class="w">       </span><span class="c1"># Required. See enums</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">  </span><span class="nt">filters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Condition</span><span class="p p-Indicator">]</span><span class="w">    </span><span class="c1"># Optional. Filter criteria</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">  </span><span class="nt">rank_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">         </span><span class="c1"># Optional. Ranking signal</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">  </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asc | desc</span><span class="w">       </span><span class="c1"># Optional. Default: desc</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w">  </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">          </span><span class="c1"># Optional. Max symbols</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a>
</span><span id="__span-7-15"><a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="c1"># Option C: Screener</span>
</span><span id="__span-7-16"><a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-7-17"><a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">screener</span>
</span><span id="__span-7-18"><a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">  </span><span class="nt">base</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">            </span><span class="c1"># Optional. Starting universe (index or &quot;all&quot;)</span>
</span><span id="__span-7-19"><a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="w">  </span><span class="nt">filters</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Condition</span><span class="p p-Indicator">]</span><span class="w">    </span><span class="c1"># Required. Min 1</span>
</span><span id="__span-7-20"><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="w">  </span><span class="nt">rank_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">         </span><span class="c1"># Optional</span>
</span><span id="__span-7-21"><a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">  </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asc | desc</span><span class="w">       </span><span class="c1"># Optional</span>
</span><span id="__span-7-22"><a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="w">  </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">          </span><span class="c1"># Optional</span>
</span><span id="__span-7-23"><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a>
</span><span id="__span-7-24"><a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="c1"># Option D: Dual (for long-short)</span>
</span><span id="__span-7-25"><a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-7-26"><a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dual</span>
</span><span id="__span-7-27"><a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">  </span><span class="nt">long</span><span class="p">:</span><span class="w">                   </span><span class="c1"># Same structure as index/screener</span>
</span><span id="__span-7-28"><a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">index</span>
</span><span id="__span-7-29"><a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">    </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SP500</span>
</span><span id="__span-7-30"><a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="w">    </span><span class="nt">rank_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span>
</span><span id="__span-7-31"><a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a><span class="w">    </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
</span><span id="__span-7-32"><a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">    </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">top</span>
</span><span id="__span-7-33"><a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="w">  </span><span class="nt">short</span><span class="p">:</span>
</span><span id="__span-7-34"><a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">index</span>
</span><span id="__span-7-35"><a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="w">    </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SP500</span>
</span><span id="__span-7-36"><a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="w">    </span><span class="nt">rank_by</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span>
</span><span id="__span-7-37"><a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="w">    </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50</span>
</span><span id="__span-7-38"><a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="w">    </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bottom</span>
</span></code></pre></div>
<h3 id="signals-optional">Signals (Optional)<a class="headerlink" href="#signals-optional" title="Permanent link">&para;</a></h3>
<p>Named signal definitions for reuse.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="nt">signal_name</span><span class="p">:</span><span class="w">            </span><span class="c1"># Key becomes reference name</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&lt;Signal&gt;</span><span class="w">              </span><span class="c1"># Any Signal type</span>
</span></code></pre></div>
<h3 id="conditions-optional">Conditions (Optional)<a class="headerlink" href="#conditions-optional" title="Permanent link">&para;</a></h3>
<p>Named condition definitions for reuse.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">conditions</span><span class="p">:</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="nt">condition_name</span><span class="p">:</span><span class="w">         </span><span class="c1"># Key becomes reference name</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">&lt;Condition&gt;</span><span class="w">           </span><span class="c1"># Any Condition type</span>
</span></code></pre></div>
<h3 id="rules-required">Rules (Required)<a class="headerlink" href="#rules-required" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">          </span><span class="c1"># Required. Human-readable name</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">   </span><span class="c1"># Optional</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Condition</span><span class="w">       </span><span class="c1"># Required. Trigger condition</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Action</span><span class="w">          </span><span class="c1"># Required. Action to take</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">     </span><span class="c1"># Optional. Higher = evaluated first. Default: 0</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">      </span><span class="c1"># Optional. Default: true</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">    </span><span class="nt">regime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">        </span><span class="c1"># Optional. Only active in named regime</span>
</span></code></pre></div>
<h3 id="constraints-optional">Constraints (Optional)<a class="headerlink" href="#constraints-optional" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nt">constraints</span><span class="p">:</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="c1"># Position limits</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="nt">max_positions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">          </span><span class="c1"># Max concurrent positions</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="nt">min_positions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">          </span><span class="c1"># Min positions (for diversification)</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="w">  </span><span class="nt">max_position_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">       </span><span class="c1"># Max % of portfolio per position (0-100)</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">  </span><span class="c1"># Stop losses</span>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">  </span><span class="nt">stop_loss</span><span class="p">:</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="w">    </span><span class="nt">percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">               </span><span class="c1"># Fixed % stop</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="w">    </span><span class="nt">atr_multiple</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">          </span><span class="c1"># ATR-based stop</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="w">  </span><span class="nt">trailing_stop</span><span class="p">:</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">    </span><span class="nt">percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">               </span><span class="c1"># Trailing % from peak</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">    </span><span class="nt">activation_percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">    </span><span class="c1"># Activate after this profit %</span>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="w">    </span><span class="nt">atr_multiple</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">          </span><span class="c1"># ATR-based trailing</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="w">  </span><span class="nt">time_stop</span><span class="p">:</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="w">    </span><span class="nt">bars</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">                 </span><span class="c1"># Exit after N bars</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="w">  </span><span class="c1"># Take profit</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="w">  </span><span class="nt">take_profit</span><span class="p">:</span>
</span><span id="__span-11-20"><a id="__codelineno-11-20" name="__codelineno-11-20" href="#__codelineno-11-20"></a><span class="w">    </span><span class="nt">percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
</span><span id="__span-11-21"><a id="__codelineno-11-21" name="__codelineno-11-21" href="#__codelineno-11-21"></a><span class="w">    </span><span class="nt">atr_multiple</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
</span><span id="__span-11-22"><a id="__codelineno-11-22" name="__codelineno-11-22" href="#__codelineno-11-22"></a>
</span><span id="__span-11-23"><a id="__codelineno-11-23" name="__codelineno-11-23" href="#__codelineno-11-23"></a><span class="w">  </span><span class="c1"># Portfolio limits</span>
</span><span id="__span-11-24"><a id="__codelineno-11-24" name="__codelineno-11-24" href="#__codelineno-11-24"></a><span class="w">  </span><span class="nt">max_drawdown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">            </span><span class="c1"># Stop trading at this drawdown % (0-100)</span>
</span><span id="__span-11-25"><a id="__codelineno-11-25" name="__codelineno-11-25" href="#__codelineno-11-25"></a><span class="w">  </span><span class="nt">daily_loss_limit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">        </span><span class="c1"># Max daily loss % (0-100)</span>
</span><span id="__span-11-26"><a id="__codelineno-11-26" name="__codelineno-11-26" href="#__codelineno-11-26"></a><span class="w">  </span><span class="nt">max_sector_exposure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">     </span><span class="c1"># Max % in single sector (0-100)</span>
</span><span id="__span-11-27"><a id="__codelineno-11-27" name="__codelineno-11-27" href="#__codelineno-11-27"></a><span class="w">  </span><span class="nt">max_correlation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">         </span><span class="c1"># Max correlation between positions (0-1)</span>
</span><span id="__span-11-28"><a id="__codelineno-11-28" name="__codelineno-11-28" href="#__codelineno-11-28"></a>
</span><span id="__span-11-29"><a id="__codelineno-11-29" name="__codelineno-11-29" href="#__codelineno-11-29"></a><span class="w">  </span><span class="c1"># Restrictions</span>
</span><span id="__span-11-30"><a id="__codelineno-11-30" name="__codelineno-11-30" href="#__codelineno-11-30"></a><span class="w">  </span><span class="nt">no_shorting</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">            </span><span class="c1"># Default: false</span>
</span><span id="__span-11-31"><a id="__codelineno-11-31" name="__codelineno-11-31" href="#__codelineno-11-31"></a><span class="w">  </span><span class="nt">no_leverage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">            </span><span class="c1"># Default: true</span>
</span><span id="__span-11-32"><a id="__codelineno-11-32" name="__codelineno-11-32" href="#__codelineno-11-32"></a>
</span><span id="__span-11-33"><a id="__codelineno-11-33" name="__codelineno-11-33" href="#__codelineno-11-33"></a><span class="w">  </span><span class="c1"># Turnover</span>
</span><span id="__span-11-34"><a id="__codelineno-11-34" name="__codelineno-11-34" href="#__codelineno-11-34"></a><span class="w">  </span><span class="nt">max_daily_turnover</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">      </span><span class="c1"># Max % turnover per day</span>
</span><span id="__span-11-35"><a id="__codelineno-11-35" name="__codelineno-11-35" href="#__codelineno-11-35"></a><span class="w">  </span><span class="nt">min_holding_bars</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">       </span><span class="c1"># Min bars before exit allowed</span>
</span></code></pre></div>
<h3 id="schedule-optional">Schedule (Optional)<a class="headerlink" href="#schedule-optional" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">schedule</span><span class="p">:</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="nt">frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Frequency</span><span class="w">            </span><span class="c1"># tick|1m|5m|15m|30m|1h|4h|daily|weekly|monthly</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="nt">market_hours_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">boolean</span><span class="w">      </span><span class="c1"># Default: true</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                </span><span class="c1"># Default: &quot;America/New_York&quot; (e.g., &quot;Asia/Tokyo&quot;)</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">  </span><span class="nt">trading_days</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">DayOfWeek</span><span class="p p-Indicator">]</span><span class="w">       </span><span class="c1"># Default: [monday..friday]</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">  </span><span class="nt">evaluate_at</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">string</span><span class="p p-Indicator">]</span><span class="w">           </span><span class="c1"># Specific times: [&quot;09:30&quot;, &quot;15:55&quot;]</span>
</span></code></pre></div>
<h3 id="parameters-optional">Parameters (Optional)<a class="headerlink" href="#parameters-optional" title="Permanent link">&para;</a></h3>
<p>For parameter optimization in downstream applications.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">parameters</span><span class="p">:</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="w">  </span><span class="nt">param_name</span><span class="p">:</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer | number | boolean | string</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">value</span><span class="w">                </span><span class="c1"># Required</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">                   </span><span class="c1"># For numeric types</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">                   </span><span class="c1"># For numeric types</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="w">    </span><span class="nt">step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">                  </span><span class="c1"># For numeric types</span>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="w">    </span><span class="nt">choices</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">value</span><span class="p p-Indicator">]</span><span class="w">              </span><span class="c1"># For string type</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">           </span><span class="c1"># Optional</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="c1"># Usage in signals/conditions:</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="w">  </span><span class="nt">rsi</span><span class="p">:</span>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="w">      </span><span class="nt">period</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $param</span><span class="p">:</span><span class="w"> </span><span class="nv">param_name</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w">  </span><span class="c1"># Reference parameter</span>
</span></code></pre></div>
<hr />
<h2 id="type-definitions">Type Definitions<a class="headerlink" href="#type-definitions" title="Permanent link">&para;</a></h2>
<h3 id="signal">Signal<a class="headerlink" href="#signal" title="Permanent link">&para;</a></h3>
<p>Produces a numeric value.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">Signal</span><span class="p">:</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nt">oneOf</span><span class="p">:</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PriceSignal</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IndicatorSignal</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FundamentalSignal</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CalendarSignal</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EventSignal</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PortfolioSignal</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RelativeSignal</span>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConstantSignal</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ArithmeticSignal</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExpressionSignal</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExternalSignal</span>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Reference</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ParameterReference</span>
</span></code></pre></div>
<pre class="mermaid"><code>classDiagram
    class Signal {
        &lt;&lt;abstract&gt;&gt;
    }
    class PriceSignal {
        +type: "price"
        +field: PriceField
        +offset: integer
        +timeframe: Timeframe
        +symbol: string
    }
    class IndicatorSignal {
        +type: "indicator"
        +indicator: IndicatorType
        +params: object
        +offset: integer
    }
    class FundamentalSignal {
        +type: "fundamental"
        +metric: FundamentalMetric
        +symbol: string
    }
    class CalendarSignal {
        +type: "calendar"
        +field: CalendarField
    }
    class EventSignal {
        +type: "event"
        +event: EventType
        +days_before: integer
        +days_after: integer
    }
    class PortfolioSignal {
        +type: "portfolio"
        +field: PortfolioField
        +symbol: string
    }
    class RelativeSignal {
        +type: "relative"
        +signal: Signal
        +benchmark: string
        +measure: RelativeMeasure
        +lookback: integer
    }
    class ConstantSignal {
        +type: "constant"
        +value: number
    }
    class ArithmeticSignal {
        +type: "arithmetic"
        +operator: ArithmeticOp
        +operands: Signal[]
    }
    class ExpressionSignal {
        +type: "expr"
        +formula: string
    }
    class ExternalSignal {
        +type: "external"
        +source: string
        +url: string
        +default: number
    }
    class Reference {
        +$ref: string
    }
    class ParameterReference {
        +$param: string
    }

    Signal &lt;|-- PriceSignal
    Signal &lt;|-- IndicatorSignal
    Signal &lt;|-- FundamentalSignal
    Signal &lt;|-- CalendarSignal
    Signal &lt;|-- EventSignal
    Signal &lt;|-- PortfolioSignal
    Signal &lt;|-- RelativeSignal
    Signal &lt;|-- ConstantSignal
    Signal &lt;|-- ArithmeticSignal
    Signal &lt;|-- ExpressionSignal
    Signal &lt;|-- ExternalSignal
    Signal &lt;|-- Reference
    Signal &lt;|-- ParameterReference

    ArithmeticSignal o-- Signal : operands
    RelativeSignal o-- Signal : signal</code></pre>
<h4 id="pricesignal">PriceSignal<a class="headerlink" href="#pricesignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">price</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PriceField</span><span class="w">           </span><span class="c1"># Required. open|high|low|close|volume|vwap</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="nt">offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">             </span><span class="c1"># Optional. Bars back (0=current). Default: 0</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="nt">timeframe</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Timeframe</span><span class="w">        </span><span class="c1"># Optional. For MTF</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Optional. Cross-symbol reference</span>
</span></code></pre></div>
<h4 id="indicatorsignal">IndicatorSignal<a class="headerlink" href="#indicatorsignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IndicatorType</span><span class="w">    </span><span class="c1"># Required. See enums</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nt">params</span><span class="p">:</span><span class="w">                     </span><span class="c1"># Optional. Indicator-specific</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">  </span><span class="nt">period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="w">  </span><span class="nt">fast_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">  </span><span class="nt">slow_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">  </span><span class="nt">signal_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">  </span><span class="nt">std_dev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">  </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open|high|low|close|hl2|hlc3|ohlc4</span>
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="nt">offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">             </span><span class="c1"># Optional. Default: 0</span>
</span><span id="__span-16-11"><a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="nt">timeframe</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Timeframe</span><span class="w">        </span><span class="c1"># Optional</span>
</span><span id="__span-16-12"><a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Optional. Cross-symbol reference</span>
</span></code></pre></div>
<h4 id="fundamentalsignal">FundamentalSignal<a class="headerlink" href="#fundamentalsignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fundamental</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nt">metric</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FundamentalMetric</span><span class="w">   </span><span class="c1"># Required. See enums</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Optional</span>
</span></code></pre></div>
<h4 id="calendarsignal">CalendarSignal<a class="headerlink" href="#calendarsignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calendar</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CalendarField</span><span class="w">        </span><span class="c1"># Required</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="c1"># Returns 1 if matches, 0 otherwise (or actual value for some fields)</span>
</span></code></pre></div>
<p>CalendarField options:
- <code>day_of_week</code>: Returns 1-5 (Mon-Fri)
- <code>day_of_month</code>: Returns 1-31 (or -1 for last day)
- <code>week_of_month</code>: Returns 1-5
- <code>month</code>: Returns 1-12
- <code>quarter</code>: Returns 1-4
- <code>year</code>: Returns year number
- <code>is_month_start</code>: Returns 1 or 0
- <code>is_month_end</code>: Returns 1 or 0
- <code>is_quarter_start</code>: Returns 1 or 0
- <code>is_quarter_end</code>: Returns 1 or 0</p>
<h4 id="eventsignal">EventSignal<a class="headerlink" href="#eventsignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">event</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nt">event</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EventType</span><span class="w">            </span><span class="c1"># Required. See enums</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nt">days_before</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">        </span><span class="c1"># Optional. Days before event</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="nt">days_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">         </span><span class="c1"># Optional. Days after event</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="c1"># Returns 1 if within window, 0 otherwise</span>
</span></code></pre></div>
<h4 id="portfoliosignal">PortfolioSignal<a class="headerlink" href="#portfoliosignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">portfolio</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PortfolioField</span><span class="w">       </span><span class="c1"># Required. See below</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Optional. Default: current universe symbol</span>
</span></code></pre></div>
<p>PortfolioField options:
- <code>position_qty</code>: Current position quantity (negative for short)
- <code>position_value</code>: Current position market value
- <code>position_side</code>: 1 (long), -1 (short), 0 (flat)
- <code>avg_entry_price</code>: Volume-weighted average entry
- <code>unrealized_pnl</code>: Unrealized P/L in currency
- <code>unrealized_pnl_pct</code>: Unrealized P/L as % of entry
- <code>realized_pnl</code>: Realized P/L for session
- <code>days_in_position</code>: Calendar days since entry
- <code>bars_in_position</code>: Bars since entry
- <code>equity</code>: Total account equity
- <code>cash</code>: Available cash
- <code>buying_power</code>: Available buying power
- <code>daily_pnl</code>: Today's P/L
- <code>daily_pnl_pct</code>: Today's P/L as %</p>
<h4 id="relativesignal">RelativeSignal<a class="headerlink" href="#relativesignal" title="Permanent link">&para;</a></h4>
<p>For cross-asset or benchmark-relative comparisons.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">relative</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="nt">signal</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">              </span><span class="c1"># Required. The signal to compare</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="nt">benchmark</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">           </span><span class="c1"># Required. Index or symbol (e.g., &quot;SPY&quot;, &quot;NIKKEI225&quot;)</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="nt">measure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RelativeMeasure</span><span class="w">    </span><span class="c1"># Required. How to compare</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="nt">lookback</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">           </span><span class="c1"># Optional. Lookback period for rolling calculations</span>
</span></code></pre></div>
<p>RelativeMeasure options:
- <code>ratio</code>: signal / benchmark (e.g., price relative strength)
- <code>difference</code>: signal - benchmark
- <code>beta</code>: Rolling beta vs benchmark
- <code>correlation</code>: Rolling correlation vs benchmark
- <code>percentile</code>: Where signal ranks vs benchmark universe
- <code>z_score</code>: Standardized score vs benchmark</p>
<p><strong>Example - Price Relative to S&amp;P 500:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nt">relative_strength</span><span class="p">:</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">relative</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">    </span><span class="nt">signal</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">price</span><span class="p p-Indicator">,</span><span class="nt"> field</span><span class="p">:</span><span class="w"> </span><span class="nv">close</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="w">    </span><span class="nt">benchmark</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SPY</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">    </span><span class="nt">measure</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ratio</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">    </span><span class="nt">lookback</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="nt">conditions</span><span class="p">:</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">  </span><span class="nt">outperforming</span><span class="p">:</span>
</span><span id="__span-22-11"><a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-22-12"><a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/signals/relative_strength&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-22-13"><a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;&quot;</span>
</span><span id="__span-22-14"><a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="nv">1.0</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span></code></pre></div>
<h4 id="constantsignal">ConstantSignal<a class="headerlink" href="#constantsignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">constant</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">               </span><span class="c1"># Required</span>
</span></code></pre></div>
<h4 id="arithmeticsignal">ArithmeticSignal<a class="headerlink" href="#arithmeticsignal" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">arithmetic</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ArithmeticOp</span><span class="w">      </span><span class="c1"># Required. add|subtract|multiply|divide|min|max|avg|abs|pow</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nt">operands</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Signal</span><span class="p p-Indicator">]</span><span class="w">          </span><span class="c1"># Required. Min 2 items (1 for abs)</span>
</span></code></pre></div>
<h4 id="expressionsignal">ExpressionSignal<a class="headerlink" href="#expressionsignal" title="Permanent link">&para;</a></h4>
<p>For custom formulas not expressible with built-in types.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">expr</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="nt">formula</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">             </span><span class="c1"># Required. Expression string</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="c1"># Examples:</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="c1"># &quot;(SMA(close, 20) - SMA(close, 50)) / ATR(14)&quot;</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="c1"># &quot;close / HIGHEST(close, 52)&quot;</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a><span class="c1"># &quot;IF(RSI(14) &lt; 30, 1, 0)&quot;</span>
</span></code></pre></div>
<p>Expression language supports:
- Arithmetic: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>
- Functions: <code>SMA(source, period)</code>, <code>RSI(period)</code>, etc.
- Conditionals: <code>IF(condition, then, else)</code>
- Comparisons: <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>
- Logical: <code>AND</code>, <code>OR</code>, <code>NOT</code></p>
<h4 id="externalsignal">ExternalSignal<a class="headerlink" href="#externalsignal" title="Permanent link">&para;</a></h4>
<p>For runtime-resolved signals (ML models, webhooks).</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webhook | file | provider</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                 </span><span class="c1"># For webhook</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                </span><span class="c1"># For file</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">            </span><span class="c1"># For registered provider</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="nt">refresh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Frequency</span><span class="w">          </span><span class="c1"># How often to refresh</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">             </span><span class="c1"># Fallback value if unavailable</span>
</span></code></pre></div>
<h4 id="reference">Reference<a class="headerlink" href="#reference" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nt">$ref</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">                </span><span class="c1"># JSON Pointer path</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="c1"># Examples:</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="c1"># &quot;#/signals/rsi_14&quot;</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="c1"># &quot;#/conditions/oversold&quot;</span>
</span></code></pre></div>
<h4 id="parameterreference">ParameterReference<a class="headerlink" href="#parameterreference" title="Permanent link">&para;</a></h4>
<p>Reference to a strategy parameter defined in the <code>parameters</code> section.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nt">$param</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Parameter name</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="c1"># Examples:</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="c1"># { $param: rsi_period }</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="c1"># { $param: oversold_threshold }</span>
</span></code></pre></div>
<p><strong>Example - Parameterized RSI Strategy:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">parameters</span><span class="p">:</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">  </span><span class="nt">rsi_period</span><span class="p">:</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI calculation period</span>
</span><span id="__span-29-8"><a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>
</span><span id="__span-29-9"><a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a><span class="w">  </span><span class="nt">oversold_level</span><span class="p">:</span>
</span><span id="__span-29-10"><a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-29-11"><a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</span><span id="__span-29-12"><a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
</span><span id="__span-29-13"><a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">40</span>
</span><span id="__span-29-14"><a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a>
</span><span id="__span-29-15"><a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-29-16"><a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">  </span><span class="nt">rsi</span><span class="p">:</span>
</span><span id="__span-29-17"><a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-29-18"><a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span>
</span><span id="__span-29-19"><a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span>
</span><span id="__span-29-20"><a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w">      </span><span class="nt">period</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $param</span><span class="p">:</span><span class="w"> </span><span class="nv">rsi_period</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w">     </span><span class="c1"># Uses parameter</span>
</span><span id="__span-29-21"><a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a>
</span><span id="__span-29-22"><a id="__codelineno-29-22" name="__codelineno-29-22" href="#__codelineno-29-22"></a><span class="nt">conditions</span><span class="p">:</span>
</span><span id="__span-29-23"><a id="__codelineno-29-23" name="__codelineno-29-23" href="#__codelineno-29-23"></a><span class="w">  </span><span class="nt">oversold</span><span class="p">:</span>
</span><span id="__span-29-24"><a id="__codelineno-29-24" name="__codelineno-29-24" href="#__codelineno-29-24"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-29-25"><a id="__codelineno-29-25" name="__codelineno-29-25" href="#__codelineno-29-25"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/signals/rsi&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-29-26"><a id="__codelineno-29-26" name="__codelineno-29-26" href="#__codelineno-29-26"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;&quot;</span>
</span><span id="__span-29-27"><a id="__codelineno-29-27" name="__codelineno-29-27" href="#__codelineno-29-27"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $param</span><span class="p">:</span><span class="w"> </span><span class="nv">oversold_level</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w">    </span><span class="c1"># Uses parameter</span>
</span></code></pre></div>
<hr />
<h3 id="condition">Condition<a class="headerlink" href="#condition" title="Permanent link">&para;</a></h3>
<p>Produces a boolean value.</p>
<p><strong>UTSS v1.0 uses minimal condition primitives.</strong> Complex patterns (crossovers, ranges, temporal, sequences) are expressed via <code>expr</code> formulas. See <code>patterns/</code> directory for reusable formulas.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nt">Condition</span><span class="p">:</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="w">  </span><span class="nt">oneOf</span><span class="p">:</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ComparisonCondition</span><span class="w">   </span><span class="c1"># Compare signals</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AndCondition</span><span class="w">          </span><span class="c1"># All must be true</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OrCondition</span><span class="w">           </span><span class="c1"># Any must be true</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NotCondition</span><span class="w">          </span><span class="c1"># Negate condition</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExpressionCondition</span><span class="w">   </span><span class="c1"># Formula for complex patterns</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AlwaysCondition</span><span class="w">       </span><span class="c1"># Unconditional (for scheduled actions)</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Reference</span><span class="w">             </span><span class="c1"># $ref to named condition</span>
</span></code></pre></div>
<pre class="mermaid"><code>classDiagram
    class Condition {
        &lt;&lt;abstract&gt;&gt;
    }
    class ComparisonCondition {
        +type: "comparison"
        +left: Signal
        +operator: ComparisonOp
        +right: Signal
    }
    class AndCondition {
        +type: "and"
        +conditions: Condition[]
    }
    class OrCondition {
        +type: "or"
        +conditions: Condition[]
    }
    class NotCondition {
        +type: "not"
        +condition: Condition
    }
    class ExpressionCondition {
        +type: "expr"
        +formula: string
    }
    class AlwaysCondition {
        +type: "always"
    }

    Condition &lt;|-- ComparisonCondition
    Condition &lt;|-- AndCondition
    Condition &lt;|-- OrCondition
    Condition &lt;|-- NotCondition
    Condition &lt;|-- ExpressionCondition
    Condition &lt;|-- AlwaysCondition

    ComparisonCondition o-- Signal : left, right
    AndCondition o-- Condition : conditions
    OrCondition o-- Condition : conditions
    NotCondition o-- Condition : condition</code></pre>
<h4 id="comparisoncondition">ComparisonCondition<a class="headerlink" href="#comparisoncondition" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">                </span><span class="c1"># Required</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ComparisonOp</span><span class="w">      </span><span class="c1"># Required. &lt;|&lt;=|=|&gt;=|&gt;|!=</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">               </span><span class="c1"># Required</span>
</span></code></pre></div>
<h4 id="andcondition">AndCondition<a class="headerlink" href="#andcondition" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">and</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="nt">conditions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Condition</span><span class="p p-Indicator">]</span><span class="w">     </span><span class="c1"># Required. Min 2</span>
</span></code></pre></div>
<h4 id="orcondition">OrCondition<a class="headerlink" href="#orcondition" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">or</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="nt">conditions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Condition</span><span class="p p-Indicator">]</span><span class="w">     </span><span class="c1"># Required. Min 2</span>
</span></code></pre></div>
<h4 id="notcondition">NotCondition<a class="headerlink" href="#notcondition" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">not</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Condition</span><span class="w">        </span><span class="c1"># Required</span>
</span></code></pre></div>
<h4 id="expressioncondition">ExpressionCondition<a class="headerlink" href="#expressioncondition" title="Permanent link">&para;</a></h4>
<p>For complex patterns not expressible with primitives. Use for crossovers, ranges, temporal conditions, sequences, etc.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">expr</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a><span class="nt">formula</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">             </span><span class="c1"># Required. Boolean expression</span>
</span></code></pre></div>
<p><strong>Example formulas</strong> (see <code>patterns/</code> for more):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="c1"># Cross above: SMA(50) crosses above SMA(200)</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="nt">formula</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SMA(50)[-1]</span><span class="nv"> </span><span class="s">&lt;=</span><span class="nv"> </span><span class="s">SMA(200)[-1]</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">SMA(50)</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">SMA(200)&quot;</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="c1"># Range: RSI between 30 and 70</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="nt">formula</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RSI(14)</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">30</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">RSI(14)</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">70&quot;</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a><span class="c1"># Temporal: RSI oversold for 3 consecutive bars</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a><span class="nt">formula</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;all(RSI(14)</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">30,</span><span class="nv"> </span><span class="s">bars=3)&quot;</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="c1"># Sequence: RSI oversold then price bounce</span>
</span><span id="__span-36-11"><a id="__codelineno-36-11" name="__codelineno-36-11" href="#__codelineno-36-11"></a><span class="nt">formula</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;RSI(14)[-5:-1].min()</span><span class="nv"> </span><span class="s">&lt;</span><span class="nv"> </span><span class="s">30</span><span class="nv"> </span><span class="s">and</span><span class="nv"> </span><span class="s">close</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">close[-1]</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">1.02&quot;</span>
</span></code></pre></div>
<p>Expression language supports:
- Arithmetic: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>
- Comparisons: <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>
- Logical: <code>and</code>, <code>or</code>, <code>not</code>
- Indexing: <code>signal[-1]</code> (1 bar ago), <code>signal[-5:-1]</code> (range)
- Functions: <code>min()</code>, <code>max()</code>, <code>all()</code>, <code>any()</code>, <code>abs()</code>
- Indicators: <code>SMA(period)</code>, <code>RSI(period)</code>, <code>ATR(period)</code>, etc.</p>
<h4 id="alwayscondition">AlwaysCondition<a class="headerlink" href="#alwayscondition" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">always</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a><span class="c1"># Always evaluates to true. Useful for scheduled rebalancing.</span>
</span></code></pre></div>
<hr />
<h3 id="action">Action<a class="headerlink" href="#action" title="Permanent link">&para;</a></h3>
<p>What to do when condition is met.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="nt">Action</span><span class="p">:</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="w">  </span><span class="nt">oneOf</span><span class="p">:</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TradeAction</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RebalanceAction</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AlertAction</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HoldAction</span>
</span></code></pre></div>
<pre class="mermaid"><code>classDiagram
    class Action {
        &lt;&lt;abstract&gt;&gt;
    }
    class TradeAction {
        +type: "trade"
        +direction: Direction
        +symbol: string
        +sizing: Sizing
        +order_type: OrderType
        +limit_price: Signal
        +stop_price: Signal
        +time_in_force: TimeInForce
    }
    class RebalanceAction {
        +type: "rebalance"
        +method: RebalanceMethod
        +targets: TargetWeight[]
        +threshold: number
    }
    class AlertAction {
        +type: "alert"
        +message: string
        +level: AlertLevel
        +channels: Channel[]
        +throttle_minutes: integer
    }
    class HoldAction {
        +type: "hold"
        +reason: string
    }

    Action &lt;|-- TradeAction
    Action &lt;|-- RebalanceAction
    Action &lt;|-- AlertAction
    Action &lt;|-- HoldAction

    TradeAction o-- Sizing : sizing
    TradeAction o-- Signal : limit_price, stop_price</code></pre>
<h4 id="tradeaction">TradeAction<a class="headerlink" href="#tradeaction" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trade</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buy | sell | short | cover</span><span class="w">  </span><span class="c1"># Required</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Optional. Default: current universe symbol</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a><span class="nt">sizing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sizing</span><span class="w">              </span><span class="c1"># Required</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a><span class="nt">order_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OrderType</span><span class="w">       </span><span class="c1"># Optional. Default: market</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="nt">limit_price</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">         </span><span class="c1"># Optional. For limit orders</span>
</span><span id="__span-39-7"><a id="__codelineno-39-7" name="__codelineno-39-7" href="#__codelineno-39-7"></a><span class="nt">stop_price</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">          </span><span class="c1"># Optional. For stop orders</span>
</span><span id="__span-39-8"><a id="__codelineno-39-8" name="__codelineno-39-8" href="#__codelineno-39-8"></a><span class="nt">time_in_force</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TimeInForce</span><span class="w">  </span><span class="c1"># Optional. Default: day</span>
</span></code></pre></div>
<h4 id="rebalanceaction">RebalanceAction<a class="headerlink" href="#rebalanceaction" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rebalance</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RebalanceMethod</span><span class="w">     </span><span class="c1"># Required</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="nt">targets</span><span class="p">:</span><span class="w">                    </span><span class="c1"># Required for target_weights method</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="w">    </span><span class="nt">weight</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">          </span><span class="c1"># 0-1</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">           </span><span class="c1"># Optional. Min deviation to trigger. Default: 0.05</span>
</span></code></pre></div>
<p>RebalanceMethod options:
- <code>equal_weight</code>: Equal allocation to all universe symbols
- <code>market_cap_weight</code>: Weight by market cap
- <code>risk_parity</code>: Weight by inverse volatility (equal risk contribution)
- <code>inverse_volatility</code>: Weight by inverse volatility
- <code>target_weights</code>: Use explicit targets</p>
<h4 id="alertaction">AlertAction<a class="headerlink" href="#alertaction" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alert</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="nt">message</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">             </span><span class="c1"># Required. Supports placeholders: {symbol}, {price}, {indicator:NAME}</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info | warning | critical</span><span class="w">  </span><span class="c1"># Optional. Default: info</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="nt">channels</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">Channel</span><span class="p p-Indicator">]</span><span class="w">         </span><span class="c1"># Optional. Default: [log]</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="nt">throttle_minutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">   </span><span class="c1"># Optional. Min minutes between repeated alerts</span>
</span></code></pre></div>
<p>Channel options: <code>log</code>, <code>webhook</code>, <code>email</code>, <code>sms</code>, <code>telegram</code>, <code>discord</code>, <code>slack</code></p>
<h4 id="holdaction">HoldAction<a class="headerlink" href="#holdaction" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hold</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="nt">reason</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">              </span><span class="c1"># Optional. Explanation for why holding</span>
</span></code></pre></div>
<hr />
<h3 id="sizing">Sizing<a class="headerlink" href="#sizing" title="Permanent link">&para;</a></h3>
<p>How much to trade.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="nt">Sizing</span><span class="p">:</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="w">  </span><span class="nt">oneOf</span><span class="p">:</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">FixedAmountSizing</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PercentEquitySizing</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PercentPositionSizing</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RiskBasedSizing</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">KellySizing</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">VolatilityAdjustedSizing</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConditionalSizing</span>
</span></code></pre></div>
<pre class="mermaid"><code>classDiagram
    class Sizing {
        &lt;&lt;abstract&gt;&gt;
    }
    class FixedAmountSizing {
        +type: "fixed_amount"
        +amount: number
        +currency: string
    }
    class PercentEquitySizing {
        +type: "percent_of_equity"
        +percent: number
    }
    class PercentPositionSizing {
        +type: "percent_of_position"
        +percent: number
    }
    class RiskBasedSizing {
        +type: "risk_based"
        +risk_percent: number
        +stop_distance: Signal
    }
    class KellySizing {
        +type: "kelly"
        +fraction: number
        +lookback: integer
    }
    class VolatilityAdjustedSizing {
        +type: "volatility_adjusted"
        +target_volatility: number
        +lookback: integer
    }
    class ConditionalSizing {
        +type: "conditional"
        +cases: SizingCase[]
        +default: Sizing
    }

    Sizing &lt;|-- FixedAmountSizing
    Sizing &lt;|-- PercentEquitySizing
    Sizing &lt;|-- PercentPositionSizing
    Sizing &lt;|-- RiskBasedSizing
    Sizing &lt;|-- KellySizing
    Sizing &lt;|-- VolatilityAdjustedSizing
    Sizing &lt;|-- ConditionalSizing

    RiskBasedSizing o-- Signal : stop_distance
    ConditionalSizing o-- Sizing : cases, default
    ConditionalSizing o-- Condition : cases.when</code></pre>
<h4 id="fixedamountsizing">FixedAmountSizing<a class="headerlink" href="#fixedamountsizing" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fixed_amount</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="nt">amount</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">              </span><span class="c1"># Required. Currency amount</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="nt">currency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span><span class="w">            </span><span class="c1"># Optional. Default: USD</span>
</span></code></pre></div>
<h4 id="percentequitysizing">PercentEquitySizing<a class="headerlink" href="#percentequitysizing" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">percent_of_equity</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a><span class="nt">percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">             </span><span class="c1"># Required. 0-100</span>
</span></code></pre></div>
<h4 id="percentpositionsizing">PercentPositionSizing<a class="headerlink" href="#percentpositionsizing" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">percent_of_position</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="nt">percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">             </span><span class="c1"># Required. 0-100</span>
</span></code></pre></div>
<h4 id="riskbasedsizing">RiskBasedSizing<a class="headerlink" href="#riskbasedsizing" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">risk_based</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a><span class="nt">risk_percent</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">        </span><span class="c1"># Required. % of equity to risk (0-100)</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a><span class="nt">stop_distance</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Signal</span><span class="w">       </span><span class="c1"># Required. Distance to stop in price units</span>
</span></code></pre></div>
<h4 id="kellysizing">KellySizing<a class="headerlink" href="#kellysizing" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kelly</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="nt">fraction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">            </span><span class="c1"># Optional. Fraction of Kelly (0-1). Default: 0.5</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="nt">lookback</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">           </span><span class="c1"># Optional. Bars for win rate calc. Default: 100</span>
</span></code></pre></div>
<h4 id="volatilityadjustedsizing">VolatilityAdjustedSizing<a class="headerlink" href="#volatilityadjustedsizing" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">volatility_adjusted</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a><span class="nt">target_volatility</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">number</span><span class="w">   </span><span class="c1"># Required. Target annualized vol</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a><span class="nt">lookback</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span><span class="w">           </span><span class="c1"># Optional. Default: 20</span>
</span></code></pre></div>
<h4 id="conditionalsizing">ConditionalSizing<a class="headerlink" href="#conditionalsizing" title="Permanent link">&para;</a></h4>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conditional</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="nt">cases</span><span class="p">:</span><span class="w">                      </span><span class="c1"># Required. Min 1</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Condition</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="w">    </span><span class="nt">sizing</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sizing</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sizing</span><span class="w">             </span><span class="c1"># Required. Fallback sizing</span>
</span></code></pre></div>
<hr />
<h2 id="enumerations">Enumerations<a class="headerlink" href="#enumerations" title="Permanent link">&para;</a></h2>
<p>All enumerations follow the <strong>extensible enum pattern</strong>: core values are guaranteed portable, while prefixed values provide extensibility.</p>
<h3 id="closed-enums-fixed-values">Closed Enums (Fixed Values)<a class="headerlink" href="#closed-enums-fixed-values" title="Permanent link">&para;</a></h3>
<p>These enums are closed and do not support extensions:</p>
<h4 id="timeframe">Timeframe<a class="headerlink" href="#timeframe" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>tick | 1m | 5m | 15m | 30m | 1h | 4h | daily | weekly | monthly
</span></code></pre></div>
<h4 id="dayofweek">DayOfWeek<a class="headerlink" href="#dayofweek" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>monday | tuesday | wednesday | thursday | friday
</span></code></pre></div>
<h4 id="pricefield">PriceField<a class="headerlink" href="#pricefield" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>open | high | low | close | volume | vwap
</span></code></pre></div>
<h4 id="ordertype">OrderType<a class="headerlink" href="#ordertype" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>market | limit | stop | stop_limit
</span></code></pre></div>
<h4 id="timeinforce">TimeInForce<a class="headerlink" href="#timeinforce" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>day | gtc | ioc | fok
</span></code></pre></div>
<h4 id="comparisonop">ComparisonOp<a class="headerlink" href="#comparisonop" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>&lt; | &lt;= | = | &gt;= | &gt; | !=
</span></code></pre></div>
<h4 id="arithmeticop">ArithmeticOp<a class="headerlink" href="#arithmeticop" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>add | subtract | multiply | divide | min | max | avg | abs | pow
</span></code></pre></div>
<hr />
<h3 id="extensible-enums-open-for-extensions">Extensible Enums (Open for Extensions)<a class="headerlink" href="#extensible-enums-open-for-extensions" title="Permanent link">&para;</a></h3>
<p>These enums support namespaced extensions via prefixes.</p>
<h4 id="indicatortype">IndicatorType<a class="headerlink" href="#indicatortype" title="Permanent link">&para;</a></h4>
<p><strong>Core Values (Portable):</strong></p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Indicators</th>
</tr>
</thead>
<tbody>
<tr>
<td>Moving Averages</td>
<td><code>SMA</code>, <code>EMA</code>, <code>WMA</code>, <code>DEMA</code>, <code>TEMA</code>, <code>KAMA</code>, <code>HULL</code>, <code>VWMA</code></td>
</tr>
<tr>
<td>Momentum</td>
<td><code>RSI</code>, <code>MACD</code>, <code>MACD_SIGNAL</code>, <code>MACD_HIST</code>, <code>STOCH_K</code>, <code>STOCH_D</code>, <code>STOCH_RSI</code>, <code>ROC</code>, <code>MOMENTUM</code>, <code>WILLIAMS_R</code>, <code>CCI</code>, <code>MFI</code>, <code>CMO</code>, <code>TSI</code></td>
</tr>
<tr>
<td>Trend</td>
<td><code>ADX</code>, <code>PLUS_DI</code>, <code>MINUS_DI</code>, <code>AROON_UP</code>, <code>AROON_DOWN</code>, <code>AROON_OSC</code>, <code>SUPERTREND</code>, <code>PSAR</code></td>
</tr>
<tr>
<td>Volatility</td>
<td><code>ATR</code>, <code>STDDEV</code>, <code>VARIANCE</code>, <code>BB_UPPER</code>, <code>BB_MIDDLE</code>, <code>BB_LOWER</code>, <code>BB_WIDTH</code>, <code>BB_PERCENT</code>, <code>KC_UPPER</code>, <code>KC_MIDDLE</code>, <code>KC_LOWER</code>, <code>DC_UPPER</code>, <code>DC_MIDDLE</code>, <code>DC_LOWER</code></td>
</tr>
<tr>
<td>Volume</td>
<td><code>OBV</code>, <code>VWAP</code>, <code>AD</code>, <code>CMF</code>, <code>KLINGER</code></td>
</tr>
<tr>
<td>Price Patterns</td>
<td><code>HIGHEST</code>, <code>LOWEST</code>, <code>RETURN</code>, <code>DRAWDOWN</code></td>
</tr>
<tr>
<td>Statistical</td>
<td><code>ZSCORE</code>, <code>PERCENTILE</code>, <code>RANK</code>, <code>CORRELATION</code>, <code>BETA</code></td>
</tr>
<tr>
<td>Ichimoku</td>
<td><code>ICHIMOKU_TENKAN</code>, <code>ICHIMOKU_KIJUN</code>, <code>ICHIMOKU_SENKOU_A</code>, <code>ICHIMOKU_SENKOU_B</code>, <code>ICHIMOKU_CHIKOU</code></td>
</tr>
</tbody>
</table>
<p><strong>Extension Prefixes:</strong></p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Pattern</th>
<th>Example</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>custom:</code></td>
<td><code>custom:[a-zA-Z0-9_]+</code></td>
<td><code>custom:MY_SUPERTREND</code></td>
<td>User-defined indicators</td>
</tr>
<tr>
<td><code>talib:</code></td>
<td><code>talib:[A-Z0-9_]+</code></td>
<td><code>talib:CDLHAMMER</code></td>
<td>TA-Lib candle patterns</td>
</tr>
<tr>
<td><code>platform:</code></td>
<td><code>platform:[a-z]+:[a-zA-Z0-9_]+</code></td>
<td><code>platform:tradingview:SQUEEZE</code></td>
<td>Platform-specific</td>
</tr>
</tbody>
</table>
<h4 id="fundamentalmetric">FundamentalMetric<a class="headerlink" href="#fundamentalmetric" title="Permanent link">&para;</a></h4>
<p><strong>Core Values (Portable):</strong></p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Metrics</th>
</tr>
</thead>
<tbody>
<tr>
<td>Valuation</td>
<td><code>PE_RATIO</code>, <code>PB_RATIO</code>, <code>PS_RATIO</code>, <code>PEG_RATIO</code>, <code>EV_EBITDA</code>, <code>EARNINGS_YIELD</code></td>
</tr>
<tr>
<td>Profitability</td>
<td><code>ROE</code>, <code>ROA</code>, <code>ROIC</code>, <code>PROFIT_MARGIN</code>, <code>OPERATING_MARGIN</code>, <code>NET_MARGIN</code></td>
</tr>
<tr>
<td>Dividend</td>
<td><code>DIVIDEND_YIELD</code>, <code>PAYOUT_RATIO</code></td>
</tr>
<tr>
<td>Size &amp; Growth</td>
<td><code>MARKET_CAP</code>, <code>ENTERPRISE_VALUE</code>, <code>REVENUE</code>, <code>EBITDA</code>, <code>NET_INCOME</code>, <code>EPS</code>, <code>EPS_GROWTH</code>, <code>REVENUE_GROWTH</code></td>
</tr>
<tr>
<td>Financial Health</td>
<td><code>DEBT_TO_EQUITY</code>, <code>CURRENT_RATIO</code>, <code>QUICK_RATIO</code>, <code>INTEREST_COVERAGE</code></td>
</tr>
<tr>
<td>Quality</td>
<td><code>F_SCORE</code>, <code>ALTMAN_Z</code></td>
</tr>
<tr>
<td>Other</td>
<td><code>INDEX_WEIGHT</code>, <code>FREE_FLOAT</code>, <code>SHORT_INTEREST</code>, <code>ANALYST_RATING</code>, <code>PRICE_TARGET</code>, <code>EARNINGS_SURPRISE</code></td>
</tr>
</tbody>
</table>
<p><strong>Extension Prefixes:</strong></p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Pattern</th>
<th>Example</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>custom:</code></td>
<td><code>custom:[a-zA-Z0-9_]+</code></td>
<td><code>custom:MODIFIED_ALTMAN_Z</code></td>
<td>User-defined metrics</td>
</tr>
<tr>
<td><code>provider:</code></td>
<td><code>provider:[a-z]+:[a-zA-Z0-9_]+</code></td>
<td><code>provider:bloomberg:WACC</code></td>
<td>Data provider-specific</td>
</tr>
</tbody>
</table>
<h4 id="eventtype">EventType<a class="headerlink" href="#eventtype" title="Permanent link">&para;</a></h4>
<p><strong>Core Values (Portable):</strong></p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>EARNINGS_RELEASE | DIVIDEND_EX_DATE | DIVIDEND_PAY_DATE | STOCK_SPLIT |
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>IPO | DELISTING | FDA_APPROVAL | PRODUCT_LAUNCH | INDEX_ADD | INDEX_REMOVE |
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a>INSIDER_BUY | INSIDER_SELL | ANALYST_UPGRADE | ANALYST_DOWNGRADE |
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a>SEC_FILING_10K | SEC_FILING_10Q | SEC_FILING_8K
</span></code></pre></div>
<p><strong>Extension Prefixes:</strong></p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Pattern</th>
<th>Example</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>custom:</code></td>
<td><code>custom:[a-zA-Z0-9_]+</code></td>
<td><code>custom:PRODUCT_RECALL</code></td>
<td>User-defined events</td>
</tr>
<tr>
<td><code>calendar:</code></td>
<td><code>calendar:[a-zA-Z0-9_]+</code></td>
<td><code>calendar:FOMC_DECISION</code></td>
<td>Economic calendar events</td>
</tr>
</tbody>
</table>
<h4 id="stockindex">StockIndex<a class="headerlink" href="#stockindex" title="Permanent link">&para;</a></h4>
<p><strong>Core Values (Portable):</strong></p>
<table>
<thead>
<tr>
<th>Region</th>
<th>Indices</th>
</tr>
</thead>
<tbody>
<tr>
<td>Japan</td>
<td><code>NIKKEI225</code>, <code>TOPIX</code>, <code>TOPIX100</code>, <code>TOPIX500</code>, <code>JPXNIKKEI400</code>, <code>TSE_PRIME</code>, <code>TSE_STANDARD</code>, <code>TSE_GROWTH</code>, <code>TOPIX_LARGE70</code>, <code>TOPIX_MID400</code>, <code>TOPIX_SMALL</code>, <code>MOTHERS</code></td>
</tr>
<tr>
<td>US</td>
<td><code>SP500</code>, <code>NASDAQ100</code>, <code>DOW30</code>, <code>RUSSELL2000</code>, <code>RUSSELL1000</code>, <code>SP400</code>, <code>SP600</code></td>
</tr>
<tr>
<td>Europe</td>
<td><code>FTSE100</code>, <code>DAX40</code>, <code>CAC40</code>, <code>STOXX50</code>, <code>STOXX600</code></td>
</tr>
<tr>
<td>Asia-Pacific</td>
<td><code>HANG_SENG</code>, <code>SSE50</code>, <code>CSI300</code>, <code>KOSPI</code>, <code>KOSDAQ</code>, <code>TWSE</code>, <code>ASX200</code></td>
</tr>
<tr>
<td>Global</td>
<td><code>MSCI_WORLD</code>, <code>MSCI_EM</code>, <code>MSCI_ACWI</code>, <code>MSCI_EAFE</code></td>
</tr>
</tbody>
</table>
<p><strong>Extension Prefixes:</strong></p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Pattern</th>
<th>Example</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>custom:</code></td>
<td><code>custom:[a-zA-Z0-9_]+</code></td>
<td><code>custom:MY_WATCHLIST</code></td>
<td>User-defined lists</td>
</tr>
<tr>
<td><code>etf:</code></td>
<td><code>etf:[A-Z0-9]+</code></td>
<td><code>etf:SPY</code></td>
<td>ETF as universe source</td>
</tr>
<tr>
<td><code>sector:</code></td>
<td><code>sector:[A-Z0-9_]+</code></td>
<td><code>sector:TECHNOLOGY</code></td>
<td>Sector-based universes</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="extensibility">Extensibility<a class="headerlink" href="#extensibility" title="Permanent link">&para;</a></h2>
<p>UTSS uses a <strong>layered extensibility model</strong> that balances portability with flexibility. This design is inspired by protocols like <a href="https://www.fixtrading.org/standards/user-defined-fields/">FIX</a> (registered tag ranges) and <a href="https://protobuf.dev/programming-guides/enum/">Protocol Buffers</a> (open enums with unknown value handling).</p>
<h3 id="extensibility-philosophy">Extensibility Philosophy<a class="headerlink" href="#extensibility-philosophy" title="Permanent link">&para;</a></h3>
<div class="language-text highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>                    EXTENSIBILITY LAYERS                         
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>  Layer 1: Core Enums      Portable, all engines MUST support  
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>  Layer 2: Namespaced      custom:, talib:, platform:, etc.    
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>  Layer 3: Expressions     type: expr with formula string      
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a>  Layer 4: External        type: external for runtime signals  
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a>  Layer 5: x-extensions    Platform-specific, ignored by spec  
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a>
</span></code></pre></div>
<h3 id="layer-1-core-enums-portable">Layer 1: Core Enums (Portable)<a class="headerlink" href="#layer-1-core-enums-portable" title="Permanent link">&para;</a></h3>
<p>All values in the core enum lists are <strong>guaranteed portable</strong>. Every UTSS-compliant engine MUST support them.</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span><span class="w">              </span><span class="c1"># Core - all engines support</span>
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="nt">metric</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PE_RATIO</span><span class="w">            </span><span class="c1"># Core - all engines support</span>
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SP500</span><span class="w">                </span><span class="c1"># Core - all engines support</span>
</span></code></pre></div>
<h3 id="layer-2-namespaced-extensions-semi-portable">Layer 2: Namespaced Extensions (Semi-Portable)<a class="headerlink" href="#layer-2-namespaced-extensions-semi-portable" title="Permanent link">&para;</a></h3>
<p>For values not in the core enum, use namespaced prefixes:</p>
<table>
<thead>
<tr>
<th>Prefix</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>custom:</code></td>
<td>User-defined</td>
<td><code>custom:MY_SUPERTREND</code></td>
</tr>
<tr>
<td><code>talib:</code></td>
<td>TA-Lib indicators</td>
<td><code>talib:CDLHAMMER</code></td>
</tr>
<tr>
<td><code>platform:</code></td>
<td>Platform-specific</td>
<td><code>platform:tradingview:SQUEEZE</code></td>
</tr>
<tr>
<td><code>provider:</code></td>
<td>Data provider</td>
<td><code>provider:bloomberg:WACC</code></td>
</tr>
<tr>
<td><code>calendar:</code></td>
<td>Economic events</td>
<td><code>calendar:FOMC_DECISION</code></td>
</tr>
<tr>
<td><code>etf:</code></td>
<td>ETF as universe</td>
<td><code>etf:SPY</code></td>
</tr>
<tr>
<td><code>sector:</code></td>
<td>Sector universe</td>
<td><code>sector:TECHNOLOGY</code></td>
</tr>
</tbody>
</table>
<p><strong>Engine behavior for namespaced values:</strong>
- Engine MAY support the value
- Engine SHOULD log a warning if unsupported
- Engine MUST NOT fail validation (schema allows the pattern)</p>
<p><strong>Example:</strong></p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="w">  </span><span class="c1"># Core indicator - guaranteed support</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="w">  </span><span class="nt">rsi</span><span class="p">:</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> period</span><span class="p">:</span><span class="w"> </span><span class="nv">14</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="w">  </span><span class="c1"># Custom indicator - engine may or may not support</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="w">  </span><span class="nt">squeeze</span><span class="p">:</span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">platform:tradingview:SQUEEZE_MOMENTUM</span>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> length</span><span class="p">:</span><span class="w"> </span><span class="nv">20</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a>
</span><span id="__span-61-14"><a id="__codelineno-61-14" name="__codelineno-61-14" href="#__codelineno-61-14"></a><span class="w">  </span><span class="c1"># TA-Lib candle pattern</span>
</span><span id="__span-61-15"><a id="__codelineno-61-15" name="__codelineno-61-15" href="#__codelineno-61-15"></a><span class="w">  </span><span class="nt">hammer</span><span class="p">:</span>
</span><span id="__span-61-16"><a id="__codelineno-61-16" name="__codelineno-61-16" href="#__codelineno-61-16"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-61-17"><a id="__codelineno-61-17" name="__codelineno-61-17" href="#__codelineno-61-17"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">talib:CDLHAMMER</span>
</span></code></pre></div>
<h3 id="layer-3-expression-language">Layer 3: Expression Language<a class="headerlink" href="#layer-3-expression-language" title="Permanent link">&para;</a></h3>
<p>For calculations not expressible with built-in indicators:</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="w">  </span><span class="nt">custom_ratio</span><span class="p">:</span>
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">expr</span>
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a><span class="w">    </span><span class="nt">formula</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;(SMA(close,</span><span class="nv"> </span><span class="s">20)</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">SMA(close,</span><span class="nv"> </span><span class="s">50))</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">ATR(14)&quot;</span>
</span></code></pre></div>
<p>Expression language supports:
- Arithmetic: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>^</code>
- Functions: <code>SMA(source, period)</code>, <code>RSI(period)</code>, etc.
- Conditionals: <code>IF(condition, then, else)</code>
- Comparisons: <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>
- Logical: <code>AND</code>, <code>OR</code>, <code>NOT</code></p>
<p>Execution engines must implement an expression parser.</p>
<h3 id="layer-4-external-signals">Layer 4: External Signals<a class="headerlink" href="#layer-4-external-signals" title="Permanent link">&para;</a></h3>
<p>For runtime-resolved values (ML models, webhooks, files):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="w">  </span><span class="nt">ml_prediction</span><span class="p">:</span>
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">external</span>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webhook</span>
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a><span class="w">    </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://api.mymodel.com/predict&quot;</span>
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a><span class="w">    </span><span class="nt">refresh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daily</span>
</span><span id="__span-63-7"><a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
</span></code></pre></div>
<p>Execution engines must implement HTTP client / file reader.</p>
<h3 id="layer-5-x-extensions">Layer 5: x-extensions<a class="headerlink" href="#layer-5-x-extensions" title="Permanent link">&para;</a></h3>
<p>For platform-specific metadata (ignored by schema validation):</p>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="nt">x-backtest</span><span class="p">:</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="w">  </span><span class="nt">slippage_pct</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="w">  </span><span class="nt">commission_pct</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a><span class="nt">x-live</span><span class="p">:</span>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="w">  </span><span class="nt">broker</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sbi</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="w">  </span><span class="nt">account_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">margin</span>
</span></code></pre></div>
<h3 id="adding-new-core-values">Adding New Core Values<a class="headerlink" href="#adding-new-core-values" title="Permanent link">&para;</a></h3>
<p>To add a value to core enums:
1. Submit proposal to UTSS specification
2. Value is reviewed for broad applicability
3. If accepted, added in next schema version
4. Until then, use <code>custom:</code> prefix</p>
<h3 id="portability-matrix">Portability Matrix<a class="headerlink" href="#portability-matrix" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Layer</th>
<th>Validation</th>
<th>Portability</th>
<th>LLM-Friendly</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core enum</td>
<td> Strict</td>
<td> All engines</td>
<td> High</td>
</tr>
<tr>
<td><code>custom:</code> prefix</td>
<td> Pattern</td>
<td> Engine-dependent</td>
<td> High</td>
</tr>
<tr>
<td><code>platform:</code> prefix</td>
<td> Pattern</td>
<td> Platform-specific</td>
<td> Medium</td>
</tr>
<tr>
<td><code>expr:</code> formula</td>
<td> Type</td>
<td> Parser-dependent</td>
<td> Medium</td>
</tr>
<tr>
<td><code>external:</code></td>
<td> Type</td>
<td> Runtime-dependent</td>
<td> Medium</td>
</tr>
<tr>
<td><code>x-*</code></td>
<td> Ignored</td>
<td> Non-portable</td>
<td> Low</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h2>
<h3 id="minimal-strategy">Minimal Strategy<a class="headerlink" href="#minimal-strategy" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="nt">info</span><span class="p">:</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">minimal</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Minimal Strategy</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a><span class="w">  </span><span class="nt">symbols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">7203.T</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># Toyota</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Always hold</span>
</span><span id="__span-65-12"><a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-65-13"><a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span>
</span><span id="__span-65-14"><a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trade</span>
</span><span id="__span-65-15"><a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a><span class="w">      </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buy</span>
</span><span id="__span-65-16"><a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a><span class="w">      </span><span class="nt">sizing</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">percent_of_equity</span><span class="p p-Indicator">,</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span></code></pre></div>
<h3 id="rsi-mean-reversion">RSI Mean Reversion<a class="headerlink" href="#rsi-mean-reversion" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="nt">info</span><span class="p">:</span>
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rsi_reversal</span>
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI Mean Reversion</span>
</span><span id="__span-66-4"><a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span>
</span><span id="__span-66-5"><a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a><span class="w">  </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">mean-reversion</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">RSI</span><span class="p p-Indicator">]</span>
</span><span id="__span-66-6"><a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a>
</span><span id="__span-66-7"><a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-66-8"><a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static</span>
</span><span id="__span-66-9"><a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a><span class="w">  </span><span class="nt">symbols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">AAPL</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">MSFT</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">GOOGL</span><span class="p p-Indicator">]</span>
</span><span id="__span-66-10"><a id="__codelineno-66-10" name="__codelineno-66-10" href="#__codelineno-66-10"></a>
</span><span id="__span-66-11"><a id="__codelineno-66-11" name="__codelineno-66-11" href="#__codelineno-66-11"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-66-12"><a id="__codelineno-66-12" name="__codelineno-66-12" href="#__codelineno-66-12"></a><span class="w">  </span><span class="nt">rsi_14</span><span class="p">:</span>
</span><span id="__span-66-13"><a id="__codelineno-66-13" name="__codelineno-66-13" href="#__codelineno-66-13"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-66-14"><a id="__codelineno-66-14" name="__codelineno-66-14" href="#__codelineno-66-14"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span>
</span><span id="__span-66-15"><a id="__codelineno-66-15" name="__codelineno-66-15" href="#__codelineno-66-15"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> period</span><span class="p">:</span><span class="w"> </span><span class="nv">14</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-16"><a id="__codelineno-66-16" name="__codelineno-66-16" href="#__codelineno-66-16"></a>
</span><span id="__span-66-17"><a id="__codelineno-66-17" name="__codelineno-66-17" href="#__codelineno-66-17"></a><span class="nt">conditions</span><span class="p">:</span>
</span><span id="__span-66-18"><a id="__codelineno-66-18" name="__codelineno-66-18" href="#__codelineno-66-18"></a><span class="w">  </span><span class="nt">oversold</span><span class="p">:</span>
</span><span id="__span-66-19"><a id="__codelineno-66-19" name="__codelineno-66-19" href="#__codelineno-66-19"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-66-20"><a id="__codelineno-66-20" name="__codelineno-66-20" href="#__codelineno-66-20"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/signals/rsi_14&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-21"><a id="__codelineno-66-21" name="__codelineno-66-21" href="#__codelineno-66-21"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;&quot;</span>
</span><span id="__span-66-22"><a id="__codelineno-66-22" name="__codelineno-66-22" href="#__codelineno-66-22"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="nv">30</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-23"><a id="__codelineno-66-23" name="__codelineno-66-23" href="#__codelineno-66-23"></a>
</span><span id="__span-66-24"><a id="__codelineno-66-24" name="__codelineno-66-24" href="#__codelineno-66-24"></a><span class="w">  </span><span class="nt">overbought</span><span class="p">:</span>
</span><span id="__span-66-25"><a id="__codelineno-66-25" name="__codelineno-66-25" href="#__codelineno-66-25"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-66-26"><a id="__codelineno-66-26" name="__codelineno-66-26" href="#__codelineno-66-26"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/signals/rsi_14&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-27"><a id="__codelineno-66-27" name="__codelineno-66-27" href="#__codelineno-66-27"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;&quot;</span>
</span><span id="__span-66-28"><a id="__codelineno-66-28" name="__codelineno-66-28" href="#__codelineno-66-28"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="nv">70</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-29"><a id="__codelineno-66-29" name="__codelineno-66-29" href="#__codelineno-66-29"></a>
</span><span id="__span-66-30"><a id="__codelineno-66-30" name="__codelineno-66-30" href="#__codelineno-66-30"></a><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-66-31"><a id="__codelineno-66-31" name="__codelineno-66-31" href="#__codelineno-66-31"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Buy oversold</span>
</span><span id="__span-66-32"><a id="__codelineno-66-32" name="__codelineno-66-32" href="#__codelineno-66-32"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/conditions/oversold&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-33"><a id="__codelineno-66-33" name="__codelineno-66-33" href="#__codelineno-66-33"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span>
</span><span id="__span-66-34"><a id="__codelineno-66-34" name="__codelineno-66-34" href="#__codelineno-66-34"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trade</span>
</span><span id="__span-66-35"><a id="__codelineno-66-35" name="__codelineno-66-35" href="#__codelineno-66-35"></a><span class="w">      </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">buy</span>
</span><span id="__span-66-36"><a id="__codelineno-66-36" name="__codelineno-66-36" href="#__codelineno-66-36"></a><span class="w">      </span><span class="nt">sizing</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">percent_of_equity</span><span class="p p-Indicator">,</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">10</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-37"><a id="__codelineno-66-37" name="__codelineno-66-37" href="#__codelineno-66-37"></a><span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-66-38"><a id="__codelineno-66-38" name="__codelineno-66-38" href="#__codelineno-66-38"></a>
</span><span id="__span-66-39"><a id="__codelineno-66-39" name="__codelineno-66-39" href="#__codelineno-66-39"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sell overbought</span>
</span><span id="__span-66-40"><a id="__codelineno-66-40" name="__codelineno-66-40" href="#__codelineno-66-40"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/conditions/overbought&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-41"><a id="__codelineno-66-41" name="__codelineno-66-41" href="#__codelineno-66-41"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span>
</span><span id="__span-66-42"><a id="__codelineno-66-42" name="__codelineno-66-42" href="#__codelineno-66-42"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trade</span>
</span><span id="__span-66-43"><a id="__codelineno-66-43" name="__codelineno-66-43" href="#__codelineno-66-43"></a><span class="w">      </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sell</span>
</span><span id="__span-66-44"><a id="__codelineno-66-44" name="__codelineno-66-44" href="#__codelineno-66-44"></a><span class="w">      </span><span class="nt">sizing</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">percent_of_position</span><span class="p p-Indicator">,</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-45"><a id="__codelineno-66-45" name="__codelineno-66-45" href="#__codelineno-66-45"></a><span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-66-46"><a id="__codelineno-66-46" name="__codelineno-66-46" href="#__codelineno-66-46"></a>
</span><span id="__span-66-47"><a id="__codelineno-66-47" name="__codelineno-66-47" href="#__codelineno-66-47"></a><span class="nt">constraints</span><span class="p">:</span>
</span><span id="__span-66-48"><a id="__codelineno-66-48" name="__codelineno-66-48" href="#__codelineno-66-48"></a><span class="w">  </span><span class="nt">max_positions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-66-49"><a id="__codelineno-66-49" name="__codelineno-66-49" href="#__codelineno-66-49"></a><span class="w">  </span><span class="nt">stop_loss</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">5</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-50"><a id="__codelineno-66-50" name="__codelineno-66-50" href="#__codelineno-66-50"></a><span class="w">  </span><span class="nt">take_profit</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">15</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-66-51"><a id="__codelineno-66-51" name="__codelineno-66-51" href="#__codelineno-66-51"></a>
</span><span id="__span-66-52"><a id="__codelineno-66-52" name="__codelineno-66-52" href="#__codelineno-66-52"></a><span class="nt">schedule</span><span class="p">:</span>
</span><span id="__span-66-53"><a id="__codelineno-66-53" name="__codelineno-66-53" href="#__codelineno-66-53"></a><span class="w">  </span><span class="nt">frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daily</span>
</span><span id="__span-66-54"><a id="__codelineno-66-54" name="__codelineno-66-54" href="#__codelineno-66-54"></a><span class="w">  </span><span class="nt">market_hours_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-66-55"><a id="__codelineno-66-55" name="__codelineno-66-55" href="#__codelineno-66-55"></a><span class="w">  </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">America/New_York</span>
</span></code></pre></div>
<h3 id="nikkei-momentum-with-hedge">Nikkei Momentum with Hedge<a class="headerlink" href="#nikkei-momentum-with-hedge" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="nt">info</span><span class="p">:</span>
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nikkei_momentum_hedged</span>
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Nikkei 225 Momentum with RSI Hedge</span>
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span>
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="w">  </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">japan</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">momentum</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">hedged</span><span class="p p-Indicator">]</span>
</span><span id="__span-67-6"><a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a>
</span><span id="__span-67-7"><a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="nt">parameters</span><span class="p">:</span>
</span><span id="__span-67-8"><a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="w">  </span><span class="nt">momentum_lookback</span><span class="p">:</span>
</span><span id="__span-67-9"><a id="__codelineno-67-9" name="__codelineno-67-9" href="#__codelineno-67-9"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-67-10"><a id="__codelineno-67-10" name="__codelineno-67-10" href="#__codelineno-67-10"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">126</span>
</span><span id="__span-67-11"><a id="__codelineno-67-11" name="__codelineno-67-11" href="#__codelineno-67-11"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
</span><span id="__span-67-12"><a id="__codelineno-67-12" name="__codelineno-67-12" href="#__codelineno-67-12"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">252</span>
</span><span id="__span-67-13"><a id="__codelineno-67-13" name="__codelineno-67-13" href="#__codelineno-67-13"></a><span class="w">  </span><span class="nt">top_n</span><span class="p">:</span>
</span><span id="__span-67-14"><a id="__codelineno-67-14" name="__codelineno-67-14" href="#__codelineno-67-14"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-67-15"><a id="__codelineno-67-15" name="__codelineno-67-15" href="#__codelineno-67-15"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</span><span id="__span-67-16"><a id="__codelineno-67-16" name="__codelineno-67-16" href="#__codelineno-67-16"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-67-17"><a id="__codelineno-67-17" name="__codelineno-67-17" href="#__codelineno-67-17"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span><span id="__span-67-18"><a id="__codelineno-67-18" name="__codelineno-67-18" href="#__codelineno-67-18"></a><span class="w">  </span><span class="nt">hedge_rsi_threshold</span><span class="p">:</span>
</span><span id="__span-67-19"><a id="__codelineno-67-19" name="__codelineno-67-19" href="#__codelineno-67-19"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">integer</span>
</span><span id="__span-67-20"><a id="__codelineno-67-20" name="__codelineno-67-20" href="#__codelineno-67-20"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">70</span>
</span><span id="__span-67-21"><a id="__codelineno-67-21" name="__codelineno-67-21" href="#__codelineno-67-21"></a><span class="w">    </span><span class="nt">min</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
</span><span id="__span-67-22"><a id="__codelineno-67-22" name="__codelineno-67-22" href="#__codelineno-67-22"></a><span class="w">    </span><span class="nt">max</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span>
</span><span id="__span-67-23"><a id="__codelineno-67-23" name="__codelineno-67-23" href="#__codelineno-67-23"></a>
</span><span id="__span-67-24"><a id="__codelineno-67-24" name="__codelineno-67-24" href="#__codelineno-67-24"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-67-25"><a id="__codelineno-67-25" name="__codelineno-67-25" href="#__codelineno-67-25"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">index</span>
</span><span id="__span-67-26"><a id="__codelineno-67-26" name="__codelineno-67-26" href="#__codelineno-67-26"></a><span class="w">  </span><span class="nt">index</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NIKKEI225</span>
</span><span id="__span-67-27"><a id="__codelineno-67-27" name="__codelineno-67-27" href="#__codelineno-67-27"></a><span class="w">  </span><span class="nt">rank_by</span><span class="p">:</span>
</span><span id="__span-67-28"><a id="__codelineno-67-28" name="__codelineno-67-28" href="#__codelineno-67-28"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-67-29"><a id="__codelineno-67-29" name="__codelineno-67-29" href="#__codelineno-67-29"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RETURN</span>
</span><span id="__span-67-30"><a id="__codelineno-67-30" name="__codelineno-67-30" href="#__codelineno-67-30"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> period</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $param</span><span class="p">:</span><span class="w"> </span><span class="nv">momentum_lookback</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-31"><a id="__codelineno-67-31" name="__codelineno-67-31" href="#__codelineno-67-31"></a><span class="w">  </span><span class="nt">limit</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $param</span><span class="p">:</span><span class="w"> </span><span class="nv">top_n</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-32"><a id="__codelineno-67-32" name="__codelineno-67-32" href="#__codelineno-67-32"></a>
</span><span id="__span-67-33"><a id="__codelineno-67-33" name="__codelineno-67-33" href="#__codelineno-67-33"></a><span class="nt">signals</span><span class="p">:</span>
</span><span id="__span-67-34"><a id="__codelineno-67-34" name="__codelineno-67-34" href="#__codelineno-67-34"></a><span class="w">  </span><span class="nt">nikkei_etf_rsi</span><span class="p">:</span>
</span><span id="__span-67-35"><a id="__codelineno-67-35" name="__codelineno-67-35" href="#__codelineno-67-35"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">indicator</span>
</span><span id="__span-67-36"><a id="__codelineno-67-36" name="__codelineno-67-36" href="#__codelineno-67-36"></a><span class="w">    </span><span class="nt">indicator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RSI</span>
</span><span id="__span-67-37"><a id="__codelineno-67-37" name="__codelineno-67-37" href="#__codelineno-67-37"></a><span class="w">    </span><span class="nt">params</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> period</span><span class="p">:</span><span class="w"> </span><span class="nv">14</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-38"><a id="__codelineno-67-38" name="__codelineno-67-38" href="#__codelineno-67-38"></a><span class="w">    </span><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1321.T</span>
</span><span id="__span-67-39"><a id="__codelineno-67-39" name="__codelineno-67-39" href="#__codelineno-67-39"></a>
</span><span id="__span-67-40"><a id="__codelineno-67-40" name="__codelineno-67-40" href="#__codelineno-67-40"></a><span class="nt">conditions</span><span class="p">:</span>
</span><span id="__span-67-41"><a id="__codelineno-67-41" name="__codelineno-67-41" href="#__codelineno-67-41"></a><span class="w">  </span><span class="nt">etf_overbought</span><span class="p">:</span>
</span><span id="__span-67-42"><a id="__codelineno-67-42" name="__codelineno-67-42" href="#__codelineno-67-42"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-67-43"><a id="__codelineno-67-43" name="__codelineno-67-43" href="#__codelineno-67-43"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/signals/nikkei_etf_rsi&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-44"><a id="__codelineno-67-44" name="__codelineno-67-44" href="#__codelineno-67-44"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&gt;&quot;</span>
</span><span id="__span-67-45"><a id="__codelineno-67-45" name="__codelineno-67-45" href="#__codelineno-67-45"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $param</span><span class="p">:</span><span class="w"> </span><span class="nv">hedge_rsi_threshold</span><span class="w"> </span><span class="p p-Indicator">}</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-46"><a id="__codelineno-67-46" name="__codelineno-67-46" href="#__codelineno-67-46"></a>
</span><span id="__span-67-47"><a id="__codelineno-67-47" name="__codelineno-67-47" href="#__codelineno-67-47"></a><span class="w">  </span><span class="nt">etf_recovered</span><span class="p">:</span>
</span><span id="__span-67-48"><a id="__codelineno-67-48" name="__codelineno-67-48" href="#__codelineno-67-48"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-67-49"><a id="__codelineno-67-49" name="__codelineno-67-49" href="#__codelineno-67-49"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/signals/nikkei_etf_rsi&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-50"><a id="__codelineno-67-50" name="__codelineno-67-50" href="#__codelineno-67-50"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;&quot;</span>
</span><span id="__span-67-51"><a id="__codelineno-67-51" name="__codelineno-67-51" href="#__codelineno-67-51"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="nv">50</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-52"><a id="__codelineno-67-52" name="__codelineno-67-52" href="#__codelineno-67-52"></a>
</span><span id="__span-67-53"><a id="__codelineno-67-53" name="__codelineno-67-53" href="#__codelineno-67-53"></a><span class="w">  </span><span class="nt">not_hedged</span><span class="p">:</span>
</span><span id="__span-67-54"><a id="__codelineno-67-54" name="__codelineno-67-54" href="#__codelineno-67-54"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-67-55"><a id="__codelineno-67-55" name="__codelineno-67-55" href="#__codelineno-67-55"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">portfolio</span><span class="p p-Indicator">,</span><span class="nt"> field</span><span class="p">:</span><span class="w"> </span><span class="nv">position_qty</span><span class="p p-Indicator">,</span><span class="nt"> symbol</span><span class="p">:</span><span class="w"> </span><span class="nv">1321.T</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-56"><a id="__codelineno-67-56" name="__codelineno-67-56" href="#__codelineno-67-56"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;=&quot;</span>
</span><span id="__span-67-57"><a id="__codelineno-67-57" name="__codelineno-67-57" href="#__codelineno-67-57"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-58"><a id="__codelineno-67-58" name="__codelineno-67-58" href="#__codelineno-67-58"></a>
</span><span id="__span-67-59"><a id="__codelineno-67-59" name="__codelineno-67-59" href="#__codelineno-67-59"></a><span class="w">  </span><span class="nt">is_hedged</span><span class="p">:</span>
</span><span id="__span-67-60"><a id="__codelineno-67-60" name="__codelineno-67-60" href="#__codelineno-67-60"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">comparison</span>
</span><span id="__span-67-61"><a id="__codelineno-67-61" name="__codelineno-67-61" href="#__codelineno-67-61"></a><span class="w">    </span><span class="nt">left</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">portfolio</span><span class="p p-Indicator">,</span><span class="nt"> field</span><span class="p">:</span><span class="w"> </span><span class="nv">position_qty</span><span class="p p-Indicator">,</span><span class="nt"> symbol</span><span class="p">:</span><span class="w"> </span><span class="nv">1321.T</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-62"><a id="__codelineno-67-62" name="__codelineno-67-62" href="#__codelineno-67-62"></a><span class="w">    </span><span class="nt">operator</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;&quot;</span>
</span><span id="__span-67-63"><a id="__codelineno-67-63" name="__codelineno-67-63" href="#__codelineno-67-63"></a><span class="w">    </span><span class="nt">right</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">constant</span><span class="p p-Indicator">,</span><span class="nt"> value</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-64"><a id="__codelineno-67-64" name="__codelineno-67-64" href="#__codelineno-67-64"></a>
</span><span id="__span-67-65"><a id="__codelineno-67-65" name="__codelineno-67-65" href="#__codelineno-67-65"></a><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-67-66"><a id="__codelineno-67-66" name="__codelineno-67-66" href="#__codelineno-67-66"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Monthly rebalance</span>
</span><span id="__span-67-67"><a id="__codelineno-67-67" name="__codelineno-67-67" href="#__codelineno-67-67"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span>
</span><span id="__span-67-68"><a id="__codelineno-67-68" name="__codelineno-67-68" href="#__codelineno-67-68"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calendar</span>
</span><span id="__span-67-69"><a id="__codelineno-67-69" name="__codelineno-67-69" href="#__codelineno-67-69"></a><span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_month_start</span>
</span><span id="__span-67-70"><a id="__codelineno-67-70" name="__codelineno-67-70" href="#__codelineno-67-70"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span>
</span><span id="__span-67-71"><a id="__codelineno-67-71" name="__codelineno-67-71" href="#__codelineno-67-71"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rebalance</span>
</span><span id="__span-67-72"><a id="__codelineno-67-72" name="__codelineno-67-72" href="#__codelineno-67-72"></a><span class="w">      </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">equal_weight</span>
</span><span id="__span-67-73"><a id="__codelineno-67-73" name="__codelineno-67-73" href="#__codelineno-67-73"></a><span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-67-74"><a id="__codelineno-67-74" name="__codelineno-67-74" href="#__codelineno-67-74"></a>
</span><span id="__span-67-75"><a id="__codelineno-67-75" name="__codelineno-67-75" href="#__codelineno-67-75"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Activate hedge</span>
</span><span id="__span-67-76"><a id="__codelineno-67-76" name="__codelineno-67-76" href="#__codelineno-67-76"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span>
</span><span id="__span-67-77"><a id="__codelineno-67-77" name="__codelineno-67-77" href="#__codelineno-67-77"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">and</span>
</span><span id="__span-67-78"><a id="__codelineno-67-78" name="__codelineno-67-78" href="#__codelineno-67-78"></a><span class="w">      </span><span class="nt">conditions</span><span class="p">:</span>
</span><span id="__span-67-79"><a id="__codelineno-67-79" name="__codelineno-67-79" href="#__codelineno-67-79"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/conditions/etf_overbought&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-80"><a id="__codelineno-67-80" name="__codelineno-67-80" href="#__codelineno-67-80"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/conditions/not_hedged&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-81"><a id="__codelineno-67-81" name="__codelineno-67-81" href="#__codelineno-67-81"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span>
</span><span id="__span-67-82"><a id="__codelineno-67-82" name="__codelineno-67-82" href="#__codelineno-67-82"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trade</span>
</span><span id="__span-67-83"><a id="__codelineno-67-83" name="__codelineno-67-83" href="#__codelineno-67-83"></a><span class="w">      </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">short</span>
</span><span id="__span-67-84"><a id="__codelineno-67-84" name="__codelineno-67-84" href="#__codelineno-67-84"></a><span class="w">      </span><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1321.T</span>
</span><span id="__span-67-85"><a id="__codelineno-67-85" name="__codelineno-67-85" href="#__codelineno-67-85"></a><span class="w">      </span><span class="nt">sizing</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">percent_of_equity</span><span class="p p-Indicator">,</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">30</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-86"><a id="__codelineno-67-86" name="__codelineno-67-86" href="#__codelineno-67-86"></a><span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</span><span id="__span-67-87"><a id="__codelineno-67-87" name="__codelineno-67-87" href="#__codelineno-67-87"></a>
</span><span id="__span-67-88"><a id="__codelineno-67-88" name="__codelineno-67-88" href="#__codelineno-67-88"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Remove hedge</span>
</span><span id="__span-67-89"><a id="__codelineno-67-89" name="__codelineno-67-89" href="#__codelineno-67-89"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span>
</span><span id="__span-67-90"><a id="__codelineno-67-90" name="__codelineno-67-90" href="#__codelineno-67-90"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">and</span>
</span><span id="__span-67-91"><a id="__codelineno-67-91" name="__codelineno-67-91" href="#__codelineno-67-91"></a><span class="w">      </span><span class="nt">conditions</span><span class="p">:</span>
</span><span id="__span-67-92"><a id="__codelineno-67-92" name="__codelineno-67-92" href="#__codelineno-67-92"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/conditions/etf_recovered&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-93"><a id="__codelineno-67-93" name="__codelineno-67-93" href="#__codelineno-67-93"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> $ref</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#/conditions/is_hedged&quot;</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-94"><a id="__codelineno-67-94" name="__codelineno-67-94" href="#__codelineno-67-94"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span>
</span><span id="__span-67-95"><a id="__codelineno-67-95" name="__codelineno-67-95" href="#__codelineno-67-95"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trade</span>
</span><span id="__span-67-96"><a id="__codelineno-67-96" name="__codelineno-67-96" href="#__codelineno-67-96"></a><span class="w">      </span><span class="nt">direction</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cover</span>
</span><span id="__span-67-97"><a id="__codelineno-67-97" name="__codelineno-67-97" href="#__codelineno-67-97"></a><span class="w">      </span><span class="nt">symbol</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1321.T</span>
</span><span id="__span-67-98"><a id="__codelineno-67-98" name="__codelineno-67-98" href="#__codelineno-67-98"></a><span class="w">      </span><span class="nt">sizing</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> type</span><span class="p">:</span><span class="w"> </span><span class="nv">percent_of_position</span><span class="p p-Indicator">,</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">100</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-99"><a id="__codelineno-67-99" name="__codelineno-67-99" href="#__codelineno-67-99"></a><span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</span><span id="__span-67-100"><a id="__codelineno-67-100" name="__codelineno-67-100" href="#__codelineno-67-100"></a>
</span><span id="__span-67-101"><a id="__codelineno-67-101" name="__codelineno-67-101" href="#__codelineno-67-101"></a><span class="nt">constraints</span><span class="p">:</span>
</span><span id="__span-67-102"><a id="__codelineno-67-102" name="__codelineno-67-102" href="#__codelineno-67-102"></a><span class="w">  </span><span class="nt">max_positions</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
</span><span id="__span-67-103"><a id="__codelineno-67-103" name="__codelineno-67-103" href="#__codelineno-67-103"></a><span class="w">  </span><span class="nt">stop_loss</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt"> percent</span><span class="p">:</span><span class="w"> </span><span class="nv">10</span><span class="w"> </span><span class="p p-Indicator">}</span>
</span><span id="__span-67-104"><a id="__codelineno-67-104" name="__codelineno-67-104" href="#__codelineno-67-104"></a><span class="w">  </span><span class="nt">no_leverage</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id="__span-67-105"><a id="__codelineno-67-105" name="__codelineno-67-105" href="#__codelineno-67-105"></a>
</span><span id="__span-67-106"><a id="__codelineno-67-106" name="__codelineno-67-106" href="#__codelineno-67-106"></a><span class="nt">schedule</span><span class="p">:</span>
</span><span id="__span-67-107"><a id="__codelineno-67-107" name="__codelineno-67-107" href="#__codelineno-67-107"></a><span class="w">  </span><span class="nt">frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daily</span>
</span><span id="__span-67-108"><a id="__codelineno-67-108" name="__codelineno-67-108" href="#__codelineno-67-108"></a><span class="w">  </span><span class="nt">market_hours_only</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id="__span-67-109"><a id="__codelineno-67-109" name="__codelineno-67-109" href="#__codelineno-67-109"></a><span class="w">  </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Asia/Tokyo</span>
</span></code></pre></div>
<h3 id="risk-parity-portfolio">Risk Parity Portfolio<a class="headerlink" href="#risk-parity-portfolio" title="Permanent link">&para;</a></h3>
<div class="language-yaml highlight"><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="nt">info</span><span class="p">:</span>
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">risk_parity</span>
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Risk Parity Portfolio</span>
</span><span id="__span-68-4"><a id="__codelineno-68-4" name="__codelineno-68-4" href="#__codelineno-68-4"></a><span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1.0&quot;</span>
</span><span id="__span-68-5"><a id="__codelineno-68-5" name="__codelineno-68-5" href="#__codelineno-68-5"></a><span class="w">  </span><span class="nt">tags</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">portfolio</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">risk-parity</span><span class="p p-Indicator">]</span>
</span><span id="__span-68-6"><a id="__codelineno-68-6" name="__codelineno-68-6" href="#__codelineno-68-6"></a>
</span><span id="__span-68-7"><a id="__codelineno-68-7" name="__codelineno-68-7" href="#__codelineno-68-7"></a><span class="nt">universe</span><span class="p">:</span>
</span><span id="__span-68-8"><a id="__codelineno-68-8" name="__codelineno-68-8" href="#__codelineno-68-8"></a><span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">static</span>
</span><span id="__span-68-9"><a id="__codelineno-68-9" name="__codelineno-68-9" href="#__codelineno-68-9"></a><span class="w">  </span><span class="nt">symbols</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">SPY</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">TLT</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">GLD</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">VNQ</span><span class="p p-Indicator">]</span>
</span><span id="__span-68-10"><a id="__codelineno-68-10" name="__codelineno-68-10" href="#__codelineno-68-10"></a>
</span><span id="__span-68-11"><a id="__codelineno-68-11" name="__codelineno-68-11" href="#__codelineno-68-11"></a><span class="nt">rules</span><span class="p">:</span>
</span><span id="__span-68-12"><a id="__codelineno-68-12" name="__codelineno-68-12" href="#__codelineno-68-12"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Monthly risk parity rebalance</span>
</span><span id="__span-68-13"><a id="__codelineno-68-13" name="__codelineno-68-13" href="#__codelineno-68-13"></a><span class="w">    </span><span class="nt">when</span><span class="p">:</span>
</span><span id="__span-68-14"><a id="__codelineno-68-14" name="__codelineno-68-14" href="#__codelineno-68-14"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">calendar</span>
</span><span id="__span-68-15"><a id="__codelineno-68-15" name="__codelineno-68-15" href="#__codelineno-68-15"></a><span class="w">      </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">is_month_start</span>
</span><span id="__span-68-16"><a id="__codelineno-68-16" name="__codelineno-68-16" href="#__codelineno-68-16"></a><span class="w">    </span><span class="nt">then</span><span class="p">:</span>
</span><span id="__span-68-17"><a id="__codelineno-68-17" name="__codelineno-68-17" href="#__codelineno-68-17"></a><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rebalance</span>
</span><span id="__span-68-18"><a id="__codelineno-68-18" name="__codelineno-68-18" href="#__codelineno-68-18"></a><span class="w">      </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">risk_parity</span>
</span><span id="__span-68-19"><a id="__codelineno-68-19" name="__codelineno-68-19" href="#__codelineno-68-19"></a><span class="w">      </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.05</span>
</span><span id="__span-68-20"><a id="__codelineno-68-20" name="__codelineno-68-20" href="#__codelineno-68-20"></a>
</span><span id="__span-68-21"><a id="__codelineno-68-21" name="__codelineno-68-21" href="#__codelineno-68-21"></a><span class="nt">constraints</span><span class="p">:</span>
</span><span id="__span-68-22"><a id="__codelineno-68-22" name="__codelineno-68-22" href="#__codelineno-68-22"></a><span class="w">  </span><span class="nt">max_drawdown</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
</span><span id="__span-68-23"><a id="__codelineno-68-23" name="__codelineno-68-23" href="#__codelineno-68-23"></a>
</span><span id="__span-68-24"><a id="__codelineno-68-24" name="__codelineno-68-24" href="#__codelineno-68-24"></a><span class="nt">schedule</span><span class="p">:</span>
</span><span id="__span-68-25"><a id="__codelineno-68-25" name="__codelineno-68-25" href="#__codelineno-68-25"></a><span class="w">  </span><span class="nt">frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">daily</span>
</span><span id="__span-68-26"><a id="__codelineno-68-26" name="__codelineno-68-26" href="#__codelineno-68-26"></a><span class="w">  </span><span class="nt">timezone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">America/New_York</span>
</span></code></pre></div>
<hr />
<h2 id="version-history">Version History<a class="headerlink" href="#version-history" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Version</th>
<th>Date</th>
<th>Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.0.0</td>
<td>2024-01</td>
<td>Initial release with signals, conditions, rules</td>
</tr>
<tr>
<td>1.0.0</td>
<td>2024-01</td>
<td>Portfolio signals, expressions, parameters, extended indicators/indices, alerts</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>JSON Schema Draft-07: https://json-schema.org/draft-07/schema</li>
<li>ISO 8601 Datetime: https://en.wikipedia.org/wiki/ISO_8601</li>
<li>IANA Timezone Database: https://www.iana.org/time-zones</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 obichan117
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/obichan117/universal-trading-strategy-schema" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://pypi.org/project/utss/" target="_blank" rel="noopener" title="pypi.org" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>